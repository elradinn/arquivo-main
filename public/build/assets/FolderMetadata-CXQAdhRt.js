import{b as g,j as e,M as b,W as R,n as M,Y as A}from"./app-D_sGyMKs.js";import{Y as S}from"./index-DlbEEtbD.js";import{u as j,A as q,d as C,b as w,c as I}from"./Authenticated-Bn8-pIpC.js";import{u as D}from"./use-fetch-metadata-DTjUgtXR.js";import{u as k,C as n}from"./Combobox-C8-r_sxZ.js";import{S as f}from"./Stack-Bu0ZIYtP.js";import{I as v}from"./InputBase-BsilGFdQ.js";import{G as p}from"./Avatar-XVbTO5AB.js";import{B as u}from"./Button-drh6xeIV.js";import{T as y}from"./Text-qvb52CaA.js";import"./Checkbox-DhKNXFGl.js";import"./IconUser-BP827BXd.js";import"./createReactComponent-2TRFm2tS.js";import"./use-uncontrolled-NDNXXLGG.js";import"./CheckIcon-DYUtT7iO.js";import"./Popover-BM-stX1p.js";import"./ScrollArea-CdhJt94K.js";import"./Flex-DjfWkKlt.js";import"./OfficeLogo-B7X7XOjq.js";import"./TextInput-iaoRy4pl.js";import"./get-sorted-breakpoints-Dsh_a-um.js";const O=({folderId:l,onAdd:o})=>{var x;const{modals:c,closeModal:r}=j(),[t,s]=g.useState(null),{metadataList:a}=D(),i=k({onDropdownClose:()=>i.resetSelectedOption()}),h=()=>{t&&(o(t),r("addRequiredMetadata"),s(null))},m=a.map(d=>e.jsx(n.Option,{value:d.id.toString(),children:d.name},d.id));return e.jsx(b,{opened:c.addRequiredMetadata,onClose:()=>r("addRequiredMetadata"),title:"Add Required Metadata",children:e.jsxs(f,{gap:16,children:[e.jsxs(n,{store:i,onOptionSubmit:d=>{s(parseInt(d)),i.closeDropdown()},children:[e.jsx(n.Target,{children:e.jsx(v,{component:"button",type:"button",pointer:!0,rightSection:e.jsx(n.Chevron,{}),rightSectionPointerEvents:"none",onClick:()=>i.toggleDropdown(),children:t?(x=a.find(d=>d.id===t))==null?void 0:x.name:"Select Metadata"})}),e.jsx(n.Dropdown,{children:e.jsx(n.Options,{children:m})})]}),e.jsxs(p,{justify:"flex-end",children:[e.jsx(u,{variant:"outline",onClick:()=>r("addRequiredMetadata"),children:"Cancel"}),e.jsx(u,{onClick:h,disabled:!t,children:"Add"})]})]})})};function T({folderId:l,close:o}){const{data:c,setData:r,post:t,processing:s,errors:a,reset:i}=R({metadata_id:0});return{handleAddMetadata:m=>{c.metadata_id=m,t(route("folder.updateRequiredMetadata",l),{onSuccess:()=>{o(),M.show({message:"Metadata added successfully",color:"green"})},onError:()=>{M.show({message:"Something went wrong",color:"red"})},onFinish:()=>i()})},processing:s,errors:a}}function te({requiredMetadata:l,folder:o}){const{openModal:c,closeModal:r}=j(),{handleAddMetadata:t}=T({folderId:o.item_id,close:()=>r("addRequiredMetadata")}),s=a=>{};return e.jsxs(q,{children:[e.jsx(A,{title:"Required Metadata"}),e.jsxs(f,{gap:24,p:8,children:[e.jsxs(p,{justify:"space-between",children:[e.jsxs(y,{component:"h2",size:"xl",fw:600,c:"gray.8",children:["Required Metadata for ",o.name]}),e.jsx(u,{leftSection:e.jsx(C,{size:16}),onClick:()=>c("addRequiredMetadata"),children:"Add Required Metadata"})]}),e.jsx(S,{columns:[{accessor:"name",title:"Name"},{accessor:"description",title:"Description"},{accessor:"actions",title:"Actions",render:a=>e.jsx(p,{gap:"xs",children:e.jsx(w,{color:"red",onClick:()=>s(a.id),children:e.jsx(I,{size:16})})})}],records:l,withTableBorder:!0,borderRadius:"sm",highlightOnHover:!0,striped:!0}),e.jsx(O,{folderId:o.item_id,onAdd:t})]})]})}export{te as default};
