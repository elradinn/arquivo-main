import{w as yo,f as Je,u as Ne,x as Bo,d as Xe,j as t,T as Ko,B as Ze,L as Ho,O as so,e as xo,i as Go,b as u,R as Yo,z as qo,A as Vo,s as Jo,g as Xo,D as Zo,r as N,W as ee,n as E,M as ie,P as jo,c as Qe,a as Ke,y as bo,Y as Qo}from"./app-D_sGyMKs.js";import{Y as et}from"./index-DlbEEtbD.js";import{I as ot}from"./ItemIcon-BWJ54mDh.js";import{a as tt,u as A,M as pe,d as rt,T as q,b as K,e as st,c as nt,A as at}from"./Authenticated-Bn8-pIpC.js";import{I as it}from"./ItemBreadcrumbs-BhLWlPX2.js";import{u as lt}from"./Popover-BM-stX1p.js";import{I as ct,u as wo,a as dt}from"./use-fetch-users-approval-role-BBU-KuDT.js";import{T as D}from"./Text-qvb52CaA.js";import{S as H}from"./Stack-Bu0ZIYtP.js";import{R as fe}from"./Radio-DlhooJF1.js";import{G as z,A as Do}from"./Avatar-XVbTO5AB.js";import{T as ko}from"./Textarea-DOlrw65J.js";import{F as De}from"./Flex-DjfWkKlt.js";import{B as C}from"./Button-drh6xeIV.js";import{U as ut}from"./UpdateNumberingSchemeForm-UYc4OSDm.js";import{T as Ye}from"./TextInput-iaoRy4pl.js";import{u as pt}from"./use-generate-report-BXF5uJm9.js";import{c as R}from"./createReactComponent-2TRFm2tS.js";import{I as ft}from"./IconFolder-CeAuLkDQ.js";import{I as mt}from"./IconDownload-DX7e0K-j.js";import{u as ht}from"./use-fetch-metadata-DTjUgtXR.js";import{C as He}from"./Checkbox-DhKNXFGl.js";import"./IconUser-BP827BXd.js";import"./use-uncontrolled-NDNXXLGG.js";import"./ScrollArea-CdhJt94K.js";import"./get-color-status-CoUPVVuO.js";import"./IconPhoto-ClcBf9dY.js";import"./OfficeLogo-B7X7XOjq.js";import"./get-sorted-breakpoints-Dsh_a-um.js";import"./Anchor-DIdUeMbL.js";import"./InputBase-BsilGFdQ.js";import"./CheckIcon-DYUtT7iO.js";function no(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}var Co={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const ao={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:yo("overlay")},gt=xo((e,{zIndex:o})=>({root:{"--lo-z-index":o==null?void 0:o.toString()}})),eo=Je((e,o)=>{const r=Ne("LoadingOverlay",ao,e),{classNames:s,className:n,style:l,styles:i,unstyled:a,vars:d,transitionProps:p,loaderProps:f,overlayProps:m,visible:b,zIndex:v,...x}=r,g=Bo(),y=Xe({name:"LoadingOverlay",classes:Co,props:r,className:n,style:l,classNames:s,styles:i,unstyled:a,vars:d,varsResolver:gt}),w={...ao.overlayProps,...m};return t.jsx(Ko,{transition:"fade",...p,mounted:!!b,children:G=>t.jsxs(Ze,{...y("root",{style:G}),ref:o,...x,children:[t.jsx(Ho,{...y("loader"),unstyled:a,...f}),t.jsx(so,{...w,...y("overlay"),darkHidden:!0,unstyled:a,color:(m==null?void 0:m.color)||g.white}),t.jsx(so,{...w,...y("overlay"),lightHidden:!0,unstyled:a,color:(m==null?void 0:m.color)||g.colors.dark[5]})]})})});eo.classes=Co;eo.displayName="@mantine/core/LoadingOverlay";var Fo={exports:{}},vt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yt=vt,xt=yt;function _o(){}function Eo(){}Eo.resetWarningCache=_o;var jt=function(){function e(s,n,l,i,a,d){if(d!==xt){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}e.isRequired=e;function o(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:o,element:e,elementType:e,instanceOf:o,node:e,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:Eo,resetWarningCache:_o};return r.PropTypes=r,r};Fo.exports=jt();var bt=Fo.exports;const j=Go(bt);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wt=R("outline","adjustments","IconAdjustments",[["path",{d:"M4 10a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M6 4v4",key:"svg-1"}],["path",{d:"M6 12v8",key:"svg-2"}],["path",{d:"M10 16a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-3"}],["path",{d:"M12 4v10",key:"svg-4"}],["path",{d:"M12 18v2",key:"svg-5"}],["path",{d:"M16 7a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-6"}],["path",{d:"M18 4v1",key:"svg-7"}],["path",{d:"M18 9v11",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dt=R("outline","article","IconArticle",[["path",{d:"M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M7 8h10",key:"svg-1"}],["path",{d:"M7 12h10",key:"svg-2"}],["path",{d:"M7 16h10",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ge=R("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kt=R("outline","chevron-left","IconChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ct=R("outline","device-sd-card","IconDeviceSdCard",[["path",{d:"M7 21h10a2 2 0 0 0 2 -2v-14a2 2 0 0 0 -2 -2h-6.172a2 2 0 0 0 -1.414 .586l-3.828 3.828a2 2 0 0 0 -.586 1.414v10.172a2 2 0 0 0 2 2z",key:"svg-0"}],["path",{d:"M13 6v2",key:"svg-1"}],["path",{d:"M16 6v2",key:"svg-2"}],["path",{d:"M10 7v1",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ft=R("outline","file-isr","IconFileIsr",[["path",{d:"M15 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M15 3v4a1 1 0 0 0 1 1h4",key:"svg-1"}],["path",{d:"M6 8v-3a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7",key:"svg-2"}],["path",{d:"M3 15l3 -3l3 3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _t=R("outline","file-report","IconFileReport",[["path",{d:"M17 17m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M17 13v4h4",key:"svg-1"}],["path",{d:"M12 3v4a1 1 0 0 0 1 1h4",key:"svg-2"}],["path",{d:"M11.5 21h-6.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v2m0 3v4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Et=R("outline","folder-plus","IconFolderPlus",[["path",{d:"M12 19h-7a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v3.5",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var St=R("outline","folder-symlink","IconFolderSymlink",[["path",{d:"M3 21v-4a3 3 0 0 1 3 -3h5",key:"svg-0"}],["path",{d:"M8 17l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 11v-5a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mt=R("outline","folder-up","IconFolderUp",[["path",{d:"M12 19h-7a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v3.5",key:"svg-0"}],["path",{d:"M19 22v-6",key:"svg-1"}],["path",{d:"M22 19l-3 -3l-3 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ot=R("outline","list-tree","IconListTree",[["path",{d:"M9 6h11",key:"svg-0"}],["path",{d:"M12 12h8",key:"svg-1"}],["path",{d:"M15 18h5",key:"svg-2"}],["path",{d:"M5 6v.01",key:"svg-3"}],["path",{d:"M8 12v.01",key:"svg-4"}],["path",{d:"M11 18v.01",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zt=R("outline","selector","IconSelector",[["path",{d:"M8 9l4 -4l4 4",key:"svg-0"}],["path",{d:"M16 15l-4 4l-4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var At=R("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);const It=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function ke(e,o){const r=Rt(e);if(typeof r.path!="string"){const{webkitRelativePath:s}=e;Object.defineProperty(r,"path",{value:typeof o=="string"?o:typeof s=="string"&&s.length>0?s:e.name,writable:!1,configurable:!1,enumerable:!0})}return r}function Rt(e){const{name:o}=e;if(o&&o.lastIndexOf(".")!==-1&&!e.type){const s=o.split(".").pop().toLowerCase(),n=It.get(s);n&&Object.defineProperty(e,"type",{value:n,writable:!1,configurable:!1,enumerable:!0})}return e}var me=(e,o,r)=>new Promise((s,n)=>{var l=d=>{try{a(r.next(d))}catch(p){n(p)}},i=d=>{try{a(r.throw(d))}catch(p){n(p)}},a=d=>d.done?s(d.value):Promise.resolve(d.value).then(l,i);a((r=r.apply(e,o)).next())});const Tt=[".DS_Store","Thumbs.db"];function Lt(e){return me(this,null,function*(){return Ie(e)&&Nt(e.dataTransfer)?Ut(e.dataTransfer,e.type):Wt(e)?Pt(e):Array.isArray(e)&&e.every(o=>"getFile"in o&&typeof o.getFile=="function")?$t(e):[]})}function Nt(e){return Ie(e)}function Wt(e){return Ie(e)&&Ie(e.target)}function Ie(e){return typeof e=="object"&&e!==null}function Pt(e){return qe(e.target.files).map(o=>ke(o))}function $t(e){return me(this,null,function*(){return(yield Promise.all(e.map(r=>r.getFile()))).map(r=>ke(r))})}function Ut(e,o){return me(this,null,function*(){if(e.items){const r=qe(e.items).filter(n=>n.kind==="file");if(o!=="drop")return r;const s=yield Promise.all(r.map(Bt));return io(So(s))}return io(qe(e.files).map(r=>ke(r)))})}function io(e){return e.filter(o=>Tt.indexOf(o.name)===-1)}function qe(e){if(e===null)return[];const o=[];for(let r=0;r<e.length;r++){const s=e[r];o.push(s)}return o}function Bt(e){if(typeof e.webkitGetAsEntry!="function")return lo(e);const o=e.webkitGetAsEntry();return o&&o.isDirectory?Mo(o):lo(e)}function So(e){return e.reduce((o,r)=>[...o,...Array.isArray(r)?So(r):[r]],[])}function lo(e){const o=e.getAsFile();if(!o)return Promise.reject(`${e} is not a File`);const r=ke(o);return Promise.resolve(r)}function Kt(e){return me(this,null,function*(){return e.isDirectory?Mo(e):Ht(e)})}function Mo(e){const o=e.createReader();return new Promise((r,s)=>{const n=[];function l(){o.readEntries(i=>me(this,null,function*(){if(i.length){const a=Promise.all(i.map(Kt));n.push(a),l()}else try{const a=yield Promise.all(n);r(a)}catch(a){s(a)}}),i=>{s(i)})}l()})}function Ht(e){return me(this,null,function*(){return new Promise((o,r)=>{e.file(s=>{const n=ke(s,e.fullPath);o(n)},s=>{r(s)})})})}function Gt(e,o){if(e&&o){const r=Array.isArray(o)?o:o.split(","),s=e.name||"",n=(e.type||"").toLowerCase(),l=n.replace(/\/.*$/,"");return r.some(i=>{const a=i.trim().toLowerCase();return a.charAt(0)==="."?s.toLowerCase().endsWith(a):a.endsWith("/*")?l===a.replace(/\/.*$/,""):n===a})}return!0}var Yt=Object.defineProperty,qt=Object.defineProperties,Vt=Object.getOwnPropertyDescriptors,co=Object.getOwnPropertySymbols,Jt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable,uo=(e,o,r)=>o in e?Yt(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,Zt=(e,o)=>{for(var r in o||(o={}))Jt.call(o,r)&&uo(e,r,o[r]);if(co)for(var r of co(o))Xt.call(o,r)&&uo(e,r,o[r]);return e},Qt=(e,o)=>qt(e,Vt(o));const er="file-invalid-type",or="file-too-large",tr="file-too-small",rr="too-many-files",sr=e=>{e=Array.isArray(e)&&e.length===1?e[0]:e;const o=Array.isArray(e)?`one of ${e.join(", ")}`:e;return{code:er,message:`File type must be ${o}`}},po=e=>({code:or,message:`File is larger than ${e} ${e===1?"byte":"bytes"}`}),fo=e=>({code:tr,message:`File is smaller than ${e} ${e===1?"byte":"bytes"}`}),nr={code:rr,message:"Too many files"};function Oo(e,o){const r=e.type==="application/x-moz-file"||Gt(e,o);return[r,r?null:sr(o)]}function zo(e,o,r){if(ae(e.size))if(ae(o)&&ae(r)){if(e.size>r)return[!1,po(r)];if(e.size<o)return[!1,fo(o)]}else{if(ae(o)&&e.size<o)return[!1,fo(o)];if(ae(r)&&e.size>r)return[!1,po(r)]}return[!0,null]}function ae(e){return e!=null}function ar({files:e,accept:o,minSize:r,maxSize:s,multiple:n,maxFiles:l,validator:i}){return!n&&e.length>1||n&&l>=1&&e.length>l?!1:e.every(a=>{const[d]=Oo(a,o),[p]=zo(a,r,s),f=i?i(a):null;return d&&p&&!f})}function Re(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function Ae(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,o=>o==="Files"||o==="application/x-moz-file"):!!e.target&&!!e.target.files}function mo(e){e.preventDefault()}function ir(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function lr(e){return e.indexOf("Edge/")!==-1}function cr(e=window.navigator.userAgent){return ir(e)||lr(e)}function B(...e){return(o,...r)=>e.some(s=>(!Re(o)&&s&&s(o,...r),Re(o)))}function dr(){return"showOpenFilePicker"in window}function ur(e){return ae(e)?[{description:"Files",accept:Object.entries(e).filter(([r,s])=>{let n=!0;return Ao(r)||(console.warn(`Skipped "${r}" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.`),n=!1),(!Array.isArray(s)||!s.every(Io))&&(console.warn(`Skipped "${r}" because an invalid file extension was provided.`),n=!1),n}).reduce((r,[s,n])=>Qt(Zt({},r),{[s]:n}),{})}]:e}function pr(e){if(ae(e))return Object.entries(e).reduce((o,[r,s])=>[...o,r,...s],[]).filter(o=>Ao(o)||Io(o)).join(",")}function fr(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function mr(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function Ao(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function Io(e){return/^.*\.[\w]+$/.test(e)}var hr=Object.defineProperty,gr=Object.defineProperties,vr=Object.getOwnPropertyDescriptors,Te=Object.getOwnPropertySymbols,Ro=Object.prototype.hasOwnProperty,To=Object.prototype.propertyIsEnumerable,ho=(e,o,r)=>o in e?hr(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,M=(e,o)=>{for(var r in o||(o={}))Ro.call(o,r)&&ho(e,r,o[r]);if(Te)for(var r of Te(o))To.call(o,r)&&ho(e,r,o[r]);return e},Q=(e,o)=>gr(e,vr(o)),Le=(e,o)=>{var r={};for(var s in e)Ro.call(e,s)&&o.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&Te)for(var s of Te(e))o.indexOf(s)<0&&To.call(e,s)&&(r[s]=e[s]);return r};const oo=u.forwardRef((e,o)=>{var r=e,{children:s}=r,n=Le(r,["children"]);const l=No(n),{open:i}=l,a=Le(l,["open"]);return u.useImperativeHandle(o,()=>({open:i}),[i]),Yo.createElement(u.Fragment,null,s(Q(M({},a),{open:i})))});oo.displayName="Dropzone";const Lo={disabled:!1,getFilesFromEvent:Lt,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};oo.defaultProps=Lo;oo.propTypes={children:j.func,accept:j.objectOf(j.arrayOf(j.string)),multiple:j.bool,preventDropOnDocument:j.bool,noClick:j.bool,noKeyboard:j.bool,noDrag:j.bool,noDragEventsBubbling:j.bool,minSize:j.number,maxSize:j.number,maxFiles:j.number,disabled:j.bool,getFilesFromEvent:j.func,onFileDialogCancel:j.func,onFileDialogOpen:j.func,useFsAccessApi:j.bool,autoFocus:j.bool,onDragEnter:j.func,onDragLeave:j.func,onDragOver:j.func,onDrop:j.func,onDropAccepted:j.func,onDropRejected:j.func,onError:j.func,validator:j.func};const Ve={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function No(e={}){const{accept:o,disabled:r,getFilesFromEvent:s,maxSize:n,minSize:l,multiple:i,maxFiles:a,onDragEnter:d,onDragLeave:p,onDragOver:f,onDrop:m,onDropAccepted:b,onDropRejected:v,onFileDialogCancel:x,onFileDialogOpen:g,useFsAccessApi:y,autoFocus:w,preventDropOnDocument:G,noClick:te,noKeyboard:W,noDrag:re,noDragEventsBubbling:L,onError:P,validator:$}=M(M({},Lo),e),U=u.useMemo(()=>pr(o),[o]),T=u.useMemo(()=>ur(o),[o]),V=u.useMemo(()=>typeof g=="function"?g:go,[g]),J=u.useMemo(()=>typeof x=="function"?x:go,[x]),F=u.useRef(null),O=u.useRef(null),[Ce,S]=u.useReducer(yr,Ve),{isFocused:We,isFileDialogActive:he}=Ce,le=u.useRef(typeof window<"u"&&window.isSecureContext&&y&&dr()),Pe=()=>{!le.current&&he&&setTimeout(()=>{if(O.current){const{files:c}=O.current;c.length||(S({type:"closeDialog"}),J())}},300)};u.useEffect(()=>(window.addEventListener("focus",Pe,!1),()=>{window.removeEventListener("focus",Pe,!1)}),[O,he,J,le]);const se=u.useRef([]),Fe=c=>{F.current&&F.current.contains(c.target)||(c.preventDefault(),se.current=[])};u.useEffect(()=>(G&&(document.addEventListener("dragover",mo,!1),document.addEventListener("drop",Fe,!1)),()=>{G&&(document.removeEventListener("dragover",mo),document.removeEventListener("drop",Fe))}),[F,G]),u.useEffect(()=>(!r&&w&&F.current&&F.current.focus(),()=>{}),[F,w,r]);const Y=u.useCallback(c=>{P?P(c):console.error(c)},[P]),_e=u.useCallback(c=>{c.preventDefault(),c.persist(),ze(c),se.current=[...se.current,c.target],Ae(c)&&Promise.resolve(s(c)).then(h=>{if(Re(c)&&!L)return;const k=h.length,_=k>0&&ar({files:h,accept:U,minSize:l,maxSize:n,multiple:i,maxFiles:a,validator:$}),I=k>0&&!_;S({isDragAccept:_,isDragReject:I,isDragActive:!0,type:"setDraggedFiles"}),d&&d(c)}).catch(h=>Y(h))},[s,d,Y,L,U,l,n,i,a,$]),Ee=u.useCallback(c=>{c.preventDefault(),c.persist(),ze(c);const h=Ae(c);if(h&&c.dataTransfer)try{c.dataTransfer.dropEffect="copy"}catch{}return h&&f&&f(c),!1},[f,L]),Se=u.useCallback(c=>{c.preventDefault(),c.persist(),ze(c);const h=se.current.filter(_=>F.current&&F.current.contains(_)),k=h.indexOf(c.target);k!==-1&&h.splice(k,1),se.current=h,!(h.length>0)&&(S({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Ae(c)&&p&&p(c))},[F,p,L]),ne=u.useCallback((c,h)=>{const k=[],_=[];c.forEach(I=>{const[ye,xe]=Oo(I,U),[$e,Ue]=zo(I,l,n),je=$?$(I):null;if(ye&&$e&&!je)k.push(I);else{let be=[xe,Ue];je&&(be=be.concat(je)),_.push({file:I,errors:be.filter(Be=>Be)})}}),(!i&&k.length>1||i&&a>=1&&k.length>a)&&(k.forEach(I=>{_.push({file:I,errors:[nr]})}),k.splice(0)),S({acceptedFiles:k,fileRejections:_,type:"setFiles"}),m&&m(k,_,h),_.length>0&&v&&v(_,h),k.length>0&&b&&b(k,h)},[S,i,U,l,n,a,m,b,v,$]),ce=u.useCallback(c=>{c.preventDefault(),c.persist(),ze(c),se.current=[],Ae(c)&&Promise.resolve(s(c)).then(h=>{Re(c)&&!L||ne(h,c)}).catch(h=>Y(h)),S({type:"reset"})},[s,ne,Y,L]),X=u.useCallback(()=>{if(le.current){S({type:"openDialog"}),V();const c={multiple:i,types:T};window.showOpenFilePicker(c).then(h=>s(h)).then(h=>{ne(h,null),S({type:"closeDialog"})}).catch(h=>{fr(h)?(J(h),S({type:"closeDialog"})):mr(h)?(le.current=!1,O.current?(O.current.value=null,O.current.click()):Y(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Y(h)});return}O.current&&(S({type:"openDialog"}),V(),O.current.value=null,O.current.click())},[S,V,J,y,ne,Y,T,i]),de=u.useCallback(c=>{!F.current||!F.current.isEqualNode(c.target)||(c.key===" "||c.key==="Enter"||c.keyCode===32||c.keyCode===13)&&(c.preventDefault(),X())},[F,X]),ue=u.useCallback(()=>{S({type:"focus"})},[]),Me=u.useCallback(()=>{S({type:"blur"})},[]),ge=u.useCallback(()=>{te||(cr()?setTimeout(X,0):X())},[te,X]),Z=c=>r?null:c,ve=c=>W?null:Z(c),Oe=c=>re?null:Z(c),ze=c=>{L&&c.stopPropagation()},Wo=u.useMemo(()=>(c={})=>{var h=c,{refKey:k="ref",role:_,onKeyDown:I,onFocus:ye,onBlur:xe,onClick:$e,onDragEnter:Ue,onDragOver:je,onDragLeave:be,onDrop:Be}=h,Uo=Le(h,["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"]);return M(M({onKeyDown:ve(B(I,de)),onFocus:ve(B(ye,ue)),onBlur:ve(B(xe,Me)),onClick:Z(B($e,ge)),onDragEnter:Oe(B(Ue,_e)),onDragOver:Oe(B(je,Ee)),onDragLeave:Oe(B(be,Se)),onDrop:Oe(B(Be,ce)),role:typeof _=="string"&&_!==""?_:"presentation",[k]:F},!r&&!W?{tabIndex:0}:{}),Uo)},[F,de,ue,Me,ge,_e,Ee,Se,ce,W,re,r]),Po=u.useCallback(c=>{c.stopPropagation()},[]),$o=u.useMemo(()=>(c={})=>{var h=c,{refKey:k="ref",onChange:_,onClick:I}=h,ye=Le(h,["refKey","onChange","onClick"]);const xe={accept:U,multiple:i,type:"file",style:{display:"none"},onChange:Z(B(_,ce)),onClick:Z(B(I,Po)),tabIndex:-1,[k]:O};return M(M({},xe),ye)},[O,o,i,ce,r]);return Q(M({},Ce),{isFocused:We&&!r,getRootProps:Wo,getInputProps:$o,rootRef:F,inputRef:O,open:Z(X)})}function yr(e,o){switch(o.type){case"focus":return Q(M({},e),{isFocused:!0});case"blur":return Q(M({},e),{isFocused:!1});case"openDialog":return Q(M({},Ve),{isFileDialogActive:!0});case"closeDialog":return Q(M({},e),{isFileDialogActive:!1});case"setDraggedFiles":return Q(M({},e),{isDragActive:o.isDragActive,isDragAccept:o.isDragAccept,isDragReject:o.isDragReject});case"setFiles":return Q(M({},e),{acceptedFiles:o.acceptedFiles,fileRejections:o.fileRejections});case"reset":return M({},Ve);default:return e}}function go(){}const[xr,jr]=qo("Dropzone component was not found in tree");function to(e){const o=r=>{const{children:s,...n}=Ne(`Dropzone${no(e)}`,{},r),l=jr(),i=Vo(s)?s:t.jsx("span",{children:s});return l[e]?u.cloneElement(i,n):null};return o.displayName=`@mantine/dropzone/${no(e)}`,o}const br=to("accept"),wr=to("reject"),Dr=to("idle");var we={root:"m_d46a4834",inner:"m_b85f7144",fullScreen:"m_96f6e9ad",dropzone:"m_7946116d"};const kr={loading:!1,multiple:!0,maxSize:1/0,autoFocus:!1,activateOnClick:!0,activateOnDrag:!0,dragEventsBubbling:!0,activateOnKeyboard:!0,useFsAccessApi:!0,variant:"light",rejectColor:"red"},Cr=xo((e,{radius:o,variant:r,acceptColor:s,rejectColor:n})=>{const l=e.variantColorResolver({color:s||e.primaryColor,theme:e,variant:r}),i=e.variantColorResolver({color:n||"red",theme:e,variant:r});return{root:{"--dropzone-radius":Xo(o),"--dropzone-accept-color":l.color,"--dropzone-accept-bg":l.background,"--dropzone-reject-color":i.color,"--dropzone-reject-bg":i.background}}}),oe=Je((e,o)=>{const r=Ne("Dropzone",kr,e),{classNames:s,className:n,style:l,styles:i,unstyled:a,vars:d,radius:p,disabled:f,loading:m,multiple:b,maxSize:v,accept:x,children:g,onDropAny:y,onDrop:w,onReject:G,openRef:te,name:W,maxFiles:re,autoFocus:L,activateOnClick:P,activateOnDrag:$,dragEventsBubbling:U,activateOnKeyboard:T,onDragEnter:V,onDragLeave:J,onDragOver:F,onFileDialogCancel:O,onFileDialogOpen:Ce,preventDropOnDocument:S,useFsAccessApi:We,getFilesFromEvent:he,validator:le,rejectColor:Pe,acceptColor:se,enablePointerEvents:Fe,loaderProps:Y,inputProps:_e,mod:Ee,...Se}=r,ne=Xe({name:"Dropzone",classes:we,props:r,className:n,style:l,classNames:s,styles:i,unstyled:a,vars:d,varsResolver:Cr}),{getRootProps:ce,getInputProps:X,isDragAccept:de,isDragReject:ue,open:Me}=No({onDrop:y,onDropAccepted:w,onDropRejected:G,disabled:f||m,accept:Array.isArray(x)?x.reduce((Z,ve)=>({...Z,[ve]:[]}),{}):x,multiple:b,maxSize:v,maxFiles:re,autoFocus:L,noClick:!P,noDrag:!$,noDragEventsBubbling:!U,noKeyboard:!T,onDragEnter:V,onDragLeave:J,onDragOver:F,onFileDialogCancel:O,onFileDialogOpen:Ce,preventDropOnDocument:S,useFsAccessApi:We,validator:le,...he?{getFilesFromEvent:he}:null});Jo(te,Me);const ge=!de&&!ue;return t.jsx(xr,{value:{accept:de,reject:ue,idle:ge},children:t.jsxs(Ze,{...ce(),...ne("root",{focusable:!0}),...Se,mod:[{accept:de,reject:ue,idle:ge,disabled:f,loading:m,"activate-on-click":P},Ee],children:[t.jsx(eo,{visible:m,overlayProps:{radius:p},unstyled:a,loaderProps:Y}),t.jsx("input",{...X(_e),name:W}),t.jsx("div",{...ne("inner"),ref:o,"data-enable-pointer-events":Fe||void 0,children:g})]})})});oe.classes=we;oe.displayName="@mantine/dropzone/Dropzone";oe.Accept=br;oe.Idle=Dr;oe.Reject=wr;const Fr={loading:!1,maxSize:1/0,activateOnClick:!1,activateOnDrag:!0,dragEventsBubbling:!0,activateOnKeyboard:!0,active:!0,zIndex:yo("max"),withinPortal:!0},ro=Je((e,o)=>{const r=Ne("DropzoneFullScreen",Fr,e),{classNames:s,className:n,style:l,styles:i,unstyled:a,vars:d,active:p,onDrop:f,onReject:m,zIndex:b,withinPortal:v,portalProps:x,...g}=r,y=Xe({name:"DropzoneFullScreen",classes:we,props:r,className:n,style:l,classNames:s,styles:i,unstyled:a,rootSelector:"fullScreen"}),{resolvedClassNames:w,resolvedStyles:G}=lt({classNames:s,styles:i,props:r}),[te,W]=u.useState(0),[re,{open:L,close:P}]=tt(!1),$=T=>{var V;(V=T.dataTransfer)!=null&&V.types.includes("Files")&&(W(J=>J+1),L())},U=()=>{W(T=>T-1)};return u.useEffect(()=>{te===0&&P()},[te]),u.useEffect(()=>{if(p)return document.addEventListener("dragenter",$,!1),document.addEventListener("dragleave",U,!1),()=>{document.removeEventListener("dragenter",$,!1),document.removeEventListener("dragleave",U,!1)}},[p]),t.jsx(Zo,{...x,withinPortal:v,children:t.jsx(Ze,{...y("fullScreen",{style:{opacity:re?1:0,pointerEvents:re?"all":"none",zIndex:b}}),ref:o,children:t.jsx(oe,{...g,classNames:w,styles:G,unstyled:a,className:we.dropzone,onDrop:T=>{f==null||f(T),P(),W(0)},onReject:T=>{m==null||m(T),P(),W(0)}})})})});ro.classes=we;ro.displayName="@mantine/dropzone/DropzoneFullScreen";oe.FullScreen=ro;const vo=oe;function _r({onDrop:e,openRef:o,children:r}){return t.jsxs(vo,{openRef:o,onDrop:e,activateOnClick:!1,acceptColor:"var(--mantine-color-white)",styles:{root:{border:"none",padding:0}},children:[t.jsx(vo.Accept,{children:t.jsx(ct,{style:{width:N(52),height:N(52),color:"var(--mantine-color-blue-6)",position:"absolute",bottom:N(16),left:"50%",transform:"translateX(-50%)",zIndex:9999},stroke:1.5})}),r]})}function Er({itemParentId:e}){const[o,r]=u.useState("reviewal"),{closeModal:s,modals:n}=A(),l=wo(o,n.createWorkflow),{data:i,setData:a,post:d,processing:p,errors:f,reset:m}=ee({folder_item_id:"",resolution:"",destination:"",type:"reviewal",users:[]});return{data:i,setData:a,createApprovalSubmit:v=>{v.preventDefault(),i.folder_item_id=e??"",i.users=l.map(x=>({user_id:x.id})),d(route("workflows.store"),{preserveScroll:!0,onSuccess:()=>{s("workflow"),E.show({message:"Approval process created",color:"green"})},onError:()=>{E.show({message:"Something went wrong",color:"red"})},onFinish:()=>m()})},processing:p,errors:f,users:l,setWorkflowType:r}}const Sr=({itemParent:e})=>{const{data:o,setData:r,createApprovalSubmit:s,processing:n,errors:l,users:i,setWorkflowType:a}=Er({itemParentId:e==null?void 0:e.item_id}),{modals:d,closeModal:p}=A();return t.jsx(ie,{opened:d.createWorkflow,onClose:()=>p("createWorkflow"),title:t.jsx(D,{fw:"bold",size:"lg",children:"Create Workflow Process"}),size:550,children:t.jsxs("form",{onSubmit:s,children:[t.jsxs(H,{gap:16,children:[t.jsx(D,{size:"sm",c:"dimmed",children:"Routinely directs any uploaded file in this folder through a predefined approval workflow"}),t.jsx(fe.Group,{name:"status",value:o.type,onChange:f=>{r("type",f),a(f)},children:t.jsxs(z,{mt:"xs",children:[t.jsx(fe,{value:"reviewal",label:"Review"}),t.jsx(fe,{value:"approval",label:"Approval"})]})}),t.jsx(ko,{label:"Resolution",placeholder:"Your resolution for this approval",value:o.resolution??"",onChange:f=>r("resolution",f.target.value),error:l.resolution,autosize:!0,minRows:2,maxRows:4}),t.jsx(D,{size:"sm",fw:500,mb:-8,children:"User in this workflow"}),i.map(f=>t.jsx(jo,{withBorder:!0,radius:"md",py:16,px:10,children:t.jsxs(z,{children:[t.jsx(Do,{}),t.jsx(H,{gap:8,children:t.jsx(D,{size:"sm",children:f.name})})]})},f.id))]}),t.jsxs(De,{align:"center",justify:"end",mt:16,children:[t.jsx(C,{variant:"light",onClick:()=>p("createWorkflow"),children:"Cancel"}),t.jsx(C,{ml:12,type:"submit",loading:n,children:"Create"})]})]})})};function Mr({itemParent:e}){const{data:o,setData:r,post:s,processing:n,errors:l,reset:i}=ee({folder_item_id:(e==null?void 0:e.item_id)??"",name:"",prefix:""}),{closeModal:a}=A();return{data:o,setData:r,handleSubmit:p=>{p.preventDefault(),o.folder_item_id=(e==null?void 0:e.item_id)??"",s(route("numbering-scheme.store"),{preserveScroll:!0,onSuccess:()=>{a("numberingScheme"),E.show({message:"Numbering scheme created",color:"green"})},onError:()=>{E.show({message:"Something went wrong",color:"red"})},onFinish:()=>i()})},processing:n,errors:l}}const Or=({itemParent:e})=>{const{data:o,setData:r,handleSubmit:s,processing:n,errors:l}=Mr({itemParent:e}),{modals:i,closeModal:a}=A();return t.jsx(ie,{opened:i.createNumberingScheme,onClose:()=>a("createNumberingScheme"),title:t.jsx(D,{size:"lg",children:"Create Numbering Scheme"}),size:550,children:t.jsxs("form",{onSubmit:s,children:[t.jsxs(H,{gap:16,children:[t.jsx(Ye,{label:"Name",value:o.name,onChange:d=>r("name",d.target.value),error:l.name}),t.jsx(Ye,{label:"Prefix",value:o.prefix,onChange:d=>r("prefix",d.target.value),error:l.prefix})]}),t.jsxs(De,{align:"center",justify:"end",mt:16,children:[t.jsx(C,{variant:"light",onClick:()=>a("createNumberingScheme"),children:"Cancel"}),t.jsx(C,{ml:12,type:"submit",loading:n,children:"Create"})]})]})})};function zr({itemParent:e,close:o}){const{data:r,setData:s,post:n,processing:l,errors:i,reset:a,clearErrors:d}=ee({parent_id:"",name:""}),{closeModal:p}=A();return{data:r,setData:s,submit:m=>{r.parent_id=(e==null?void 0:e.item_id)||"",m.preventDefault(),n(route("folder.create"),{preserveScroll:!0,onSuccess:()=>{E.show({message:"New folder created",color:"green"})},onError:b=>{let v="";Object.keys(b).length>0?v=b[Object.keys(b)[0]]:v="Error during file upload. Please try again later.",E.show({message:v,color:"red"})},onFinish:()=>{p("folder"),a(),d()}})},processing:l,errors:i}}const Ar=({itemParent:e})=>{const{data:o,setData:r,submit:s,processing:n,errors:l}=zr({itemParent:e,close}),{modals:i,closeModal:a}=A();return t.jsx(ie,{opened:i.folder,onClose:()=>a("folder"),title:t.jsx(D,{fw:"bold",size:"lg",children:"Create Folder"}),size:550,children:t.jsxs("form",{onSubmit:s,children:[t.jsx(H,{gap:16,children:t.jsx(Ye,{id:"name",type:"text",name:"name",value:o.name,placeholder:"Folder Name",onChange:d=>r("name",d.target.value),error:l.name})}),t.jsxs(De,{align:"center",justify:"end",mt:16,children:[t.jsx(C,{variant:"outline",onClick:()=>a("folder"),children:"Cancel"}),t.jsx(C,{ml:12,type:"submit",loading:n,children:"Create"})]})]})})};function Ir({workflowId:e,isOpen:o}){const[r,s]=u.useState(null);u.useEffect(()=>{e&&o&&n(e)},[e,o]);const n=async l=>{try{const i=await Qe.get(`/workflows/${l}`);s(i.data)}catch(i){console.error("Error fetching workflow",i)}};return r}function Rr({itemParent:e,isOpen:o}){const[r,s]=u.useState("reviewal"),n=Ir({workflowId:e==null?void 0:e.workflow_id,isOpen:o}),l=wo(r,o),{closeModal:i}=A(),{data:a,setData:d,put:p,processing:f,errors:m,reset:b,clearErrors:v}=ee({resolution:"",type:"",users:[]});u.useEffect(()=>{d({resolution:(n==null?void 0:n.resolution)||"",type:(n==null?void 0:n.type)||"",users:((n==null?void 0:n.users)||[]).map(y=>({user_id:y.id}))}),s((n==null?void 0:n.type)||"")},[n]);const x=()=>{i("updateWorkflow"),b(),v()};return{data:a,setData:d,handleUpdateWorkflow:y=>{y.preventDefault(),a.users=l.map(w=>({user_id:w.id})),p(route("workflows.update",e==null?void 0:e.workflow_id),{onSuccess:()=>{x(),E.show({message:"Workflow updated successfully",color:"green"})},onError:()=>{E.show({message:"Something went wrong",color:"red"})},onFinish:()=>b()})},processing:f,errors:m,handleClose:x,fetchedUsers:l,setWorkflowType:s,workflow:n}}const Tr=({itemParent:e})=>{const{modals:o,closeModal:r}=A(),s=o.updateWorkflow,{data:n,setData:l,handleUpdateWorkflow:i,processing:a,fetchedUsers:d,setWorkflowType:p,errors:f}=Rr({itemParent:e,isOpen:s});return t.jsx(ie,{opened:o.updateWorkflow,onClose:()=>r("updateWorkflow"),title:t.jsx(D,{fw:"bold",size:"lg",children:"Update Workflow Process"}),size:550,children:t.jsxs("form",{onSubmit:i,children:[t.jsxs(H,{gap:16,children:[t.jsx(D,{size:"sm",c:"dimmed",children:"Routinely directs any uploaded file in this folder through a predefined approval workflow"}),t.jsx(fe.Group,{name:"status",value:n.type,onChange:m=>{l("type",m),p(m)},children:t.jsxs(z,{mt:"xs",children:[t.jsx(fe,{value:"reviewal",label:"Review"}),t.jsx(fe,{value:"approval",label:"Approval"})]})}),t.jsx(ko,{label:"Resolution",placeholder:"Your resolution for this approval",value:n.resolution??"",onChange:m=>l("resolution",m.target.value),error:f.resolution,autosize:!0,minRows:2,maxRows:4}),t.jsx(D,{size:"sm",fw:500,mb:-8,children:"Users in this workflow"}),d.map(m=>t.jsx(jo,{withBorder:!0,radius:"md",py:16,px:10,children:t.jsxs(z,{children:[t.jsx(Do,{}),t.jsxs(H,{gap:8,children:[t.jsx(D,{size:"sm",children:m.name}),t.jsx(D,{size:"sm",children:m.email})]})]})},m.id))]}),t.jsxs(De,{align:"center",justify:"end",mt:16,children:[t.jsx(C,{variant:"light",onClick:()=>r("updateWorkflow"),children:"Cancel"}),t.jsx(C,{ml:12,type:"submit",loading:a,children:"Update"})]})]})})},Lr=({uploadFileRef:e,itemParent:o})=>{var n;const{openModal:r}=A(),{generateReport:s}=pt();return t.jsxs(z,{h:"50%",px:"md",align:"center",justify:"space-between",children:[t.jsxs(z,{gap:"xs",children:[t.jsxs(pe,{shadow:"md",width:220,transitionProps:{transition:"pop-top-left"},position:"bottom-start",children:[t.jsx(pe.Target,{children:t.jsx(C,{variant:"subtle",color:"dark.3",leftSection:t.jsx(rt,{size:18}),rightSection:t.jsx(Ge,{size:12}),children:"New"})}),t.jsxs(pe.Dropdown,{children:[t.jsx(pe.Item,{leftSection:t.jsx(Et,{style:{width:N(14),height:N(14)}}),onClick:()=>r("folder"),children:"New Folder"}),t.jsx(pe.Item,{leftSection:t.jsx(Ft,{style:{width:N(14),height:N(14)}}),onClick:()=>{var l;return(l=e==null?void 0:e.current)==null?void 0:l.call(e)},children:"Upload Files"}),t.jsx(pe.Item,{leftSection:t.jsx(Mt,{style:{width:N(14),height:N(14)}}),children:"Upload Folder"})]})]}),t.jsx(q,{label:"Properties",position:"bottom",withArrow:!0,children:t.jsx(K,{component:Ke,size:"lg",href:route("folder.edit",{id:o==null?void 0:o.item_id}),variant:"transparent",color:"dark.3",children:t.jsx(wt,{size:18})})}),t.jsx(q,{label:"Workflow",position:"bottom",withArrow:!0,children:t.jsx(K,{variant:"transparent",size:"lg",color:o!=null&&o.workflow_id?"green.8":"dark.3",onClick:()=>r(o!=null&&o.workflow_id?"updateWorkflow":"createWorkflow"),children:t.jsx(dt,{size:18})})}),t.jsx(q,{label:"Metadata",position:"bottom",withArrow:!0,children:t.jsx(K,{component:Ke,size:"lg",href:route("folder.showRequiredMetadata",{id:o==null?void 0:o.item_id}),variant:"transparent",color:(n=o==null?void 0:o.required_metadata)!=null&&n.length?"green.8":"dark.3",children:t.jsx(Ct,{size:18})})}),t.jsx(q,{label:"Activity",position:"bottom",withArrow:!0,children:t.jsx(K,{component:Ke,size:"lg",href:route("folder.activity-log",{id:o==null?void 0:o.item_id}),variant:"transparent",color:"dark.3",children:t.jsx(Dt,{size:18})})}),t.jsx(q,{label:"Numbering",position:"bottom",withArrow:!0,children:t.jsx(K,{size:"lg",variant:"transparent",color:o!=null&&o.numbering_scheme_id?"green.8":"dark.3",onClick:()=>r(o!=null&&o.numbering_scheme_id?"updateNumberingScheme":"createNumberingScheme"),children:t.jsx(Ot,{size:18})})}),t.jsx(q,{label:"Column",position:"bottom",withArrow:!0,children:t.jsx(K,{variant:"transparent",color:"dark.3",size:"lg",onClick:()=>r("selectMetadataColumns"),children:t.jsx(At,{size:18})})}),t.jsx(q,{label:"Report",position:"bottom",withArrow:!0,children:t.jsx(K,{variant:"transparent",color:"dark.3",size:"lg",onClick:()=>s((o==null?void 0:o.item_id)??""),children:t.jsx(_t,{size:18})})})]}),t.jsxs(z,{gap:"xs",children:[t.jsx(q,{label:"Sort",position:"bottom",withArrow:!0,children:t.jsxs(K,{variant:"transparent",color:"dark.3",size:"lg",children:[t.jsx(zt,{size:18}),t.jsx(Ge,{size:12,style:{marginLeft:N(4)}})]})}),t.jsx(q,{label:"View",position:"bottom",withArrow:!0,children:t.jsxs(K,{variant:"transparent",color:"dark.3",size:"lg",children:[t.jsx(st,{size:18}),t.jsx(Ge,{size:12,style:{marginLeft:N(4)}})]})})]}),t.jsx(Ar,{itemParent:o}),t.jsx(Sr,{itemParent:o}),t.jsx(Tr,{itemParent:o}),t.jsx(Or,{itemParent:o}),t.jsx(ut,{itemParent:o})]})};function Nr(e){return fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(o=>o.json())}function Wr(){return{downloadFiles:({all:o,ids:r,parentId:s})=>{if(!o&&(r==null?void 0:r.length)===0)return;const n=new URLSearchParams;s&&n.append("parent_id",String(s)),o?n.append("all",o?"1":"0"):r==null||r.forEach(i=>n.append("ids[]",i));const l=route("item.download");Nr(`${l}?${n.toString()}`).then(i=>{if(!i.url)return;const a=document.createElement("a");a.download=i.filename,a.href=i.url,a.click()})}}}function Pr({setSelectedRecord:e}){const{data:o,delete:r,processing:s}=ee({ids:[]}),{closeModal:n}=A();return{handleDelete:i=>{o.ids=i,r(route("item.delete"),{onSuccess:()=>{n("deleteFiles"),setTimeout(()=>{e([])},100),E.show({message:"Files deleted",color:"green"})},onError:a=>{let d="Error during file deletion. Please try again later.";Object.keys(a).length>0&&(d=a[Object.keys(a)[0]]),E.show({message:d,color:"red"})}})},processing:s}}const $r=({selectedIds:e,setSelectedRecord:o})=>{const{handleDelete:r,processing:s}=Pr({setSelectedRecord:o}),{modals:n,closeModal:l}=A();return t.jsx(ie,{opened:n.deleteFiles,onClose:()=>l("deleteFiles"),title:t.jsx(D,{fw:"bold",size:"lg",children:"Delete Files"}),size:550,children:t.jsxs("form",{onSubmit:i=>{i.preventDefault(),r(e)},children:[t.jsx(D,{c:"dimmed",children:"Delete selected files?"}),t.jsxs(De,{align:"center",justify:"end",mt:16,children:[t.jsx(C,{variant:"subtle",onClick:()=>l("deleteFiles"),color:"gray",children:"Cancel"}),t.jsx(C,{ml:12,type:"submit",loading:s,color:"red",children:"Delete"})]})]})})};function Ur(e,o){const[r,s]=u.useState({itemParent:null,itemAncestors:null,itemContents:[]}),[n,l]=u.useState(!1),[i,a]=u.useState(null);u.useEffect(()=>{o&&d(e)},[e,o]);const d=async p=>{l(!0),a(null);try{const f=await Qe.get(route("item.showItems",{item:p}));s(f.data)}catch(f){a("Failed to fetch items."),console.error(f)}finally{l(!1)}};return{data:r,loading:n,error:i}}function Br({setSelectedRecord:e}){const{data:o,setData:r,put:s,processing:n,errors:l,reset:i,clearErrors:a}=ee({ids:[],destination_folder_id:""});return{data:o,setData:r,moveDocuments:()=>{s(route("document.move"),{onSuccess:()=>{e([]),E.show({message:"Documents moved successfully",color:"green"}),i()},onError:p=>{E.show({message:"Failed to move documents",color:"red"})},onFinish:()=>{a()}})},processing:n,errors:l,reset:i}}const Kr=({selectedDocumentIds:e,setSelectedRecord:o})=>{const{modals:r,closeModal:s}=A(),n=r.moveModal,[l,i]=u.useState(null),{data:a,loading:d,error:p}=Ur(l,n),{data:f,setData:m,moveDocuments:b,processing:v}=Br({setSelectedRecord:o}),x=w=>{i(w)},g=()=>{a.itemParent&&a.itemParent.parent_id?i(a.itemParent.parent_id):i(null)},y=()=>{if(!l){E.show({message:"Please select a destination folder.",color:"red"});return}f.ids=e,f.destination_folder_id=l,b(),s("moveModal")};return t.jsx(ie,{opened:n,onClose:()=>s("moveModal"),title:"Move Documents",size:"lg",children:t.jsxs(H,{gap:"md",children:[t.jsxs(z,{children:[l&&t.jsx(K,{onClick:g,children:t.jsx(kt,{size:16})}),t.jsx(D,{children:"Choose Destination Folder"})]}),d?t.jsx(D,{children:"Loading..."}):p?t.jsx(D,{c:"red",children:p}):t.jsx(H,{gap:"sm",style:{maxHeight:400,overflowY:"auto"},children:a.itemContents.map(w=>t.jsxs(z,{gap:"sm",style:{cursor:"pointer"},onDoubleClick:()=>x(w.item_id),children:[t.jsx(ft,{}),t.jsx(D,{children:w.name})]},w.item_id))}),t.jsxs(z,{justify:"flex-end",mt:"md",children:[t.jsx(C,{variant:"outline",onClick:()=>s("moveModal"),children:"Cancel"}),t.jsx(C,{onClick:y,disabled:!l||v,loading:v,children:"Move Here"})]})]})})},Hr=({setSelectedRecord:e,selectedIds:o,parentId:r})=>{const{downloadFiles:s}=Wr(),{openModal:n}=A();return t.jsxs(z,{h:"50%",px:"md",align:"center",justify:"flex-start",children:[t.jsx(C,{onClick:()=>n("deleteFiles"),variant:"subtle",color:"dark.3",leftSection:t.jsx(nt,{size:18}),children:"Delete"}),t.jsx(C,{onClick:()=>s({all:!1,ids:o,parentId:r}),variant:"subtle",color:"dark.3",leftSection:t.jsx(mt,{size:18}),children:"Download"}),t.jsx(C,{onClick:()=>n("moveModal"),variant:"subtle",color:"dark.3",leftSection:t.jsx(St,{size:18}),children:"Move"}),t.jsx($r,{selectedIds:o,setSelectedRecord:e}),t.jsx(Kr,{selectedDocumentIds:o,setSelectedRecord:e})]})};function Gr(e){const{data:o,post:r,reset:s,clearErrors:n}=ee({parent_id:"",files:[]});return{uploadFiles:i=>{o.parent_id=e.item_id,o.files=i.map(a=>({file:a})),r(route("document.store"),{onSuccess:()=>{E.show({message:"Document uploaded",color:"green"})},onError:a=>{let d="";Object.keys(a).length>0?d=a[Object.keys(a)[0]]:d="Error during file upload. Please try again later.",E.show({message:d,color:"red"})},onFinish:()=>{s(),n()}})}}}function Yr(){const[e,o]=u.useState([]),s=(n=>n.map(l=>l.id))(e);return{selectedRecord:e,setSelectedRecord:o,ids:s}}function qr(){return{openDocument:(o,r)=>{o==="document"&&bo.visit(route("document.show",{document:r}))}}}function Vr(){return{openFolder:(o,r)=>{o==="folder"&&bo.visit(route("folder.show",{id:r}))}}}function Jr({folderId:e,isOpen:o}){const[r,s]=u.useState([]),[n,l]=u.useState(!1),[i,a]=u.useState(null);return u.useEffect(()=>{e&&o&&(async()=>{l(!0);try{const p=await Qe.get(`/folder/${e}/metadata_columns`);s(p.data.metadata_columns),a(null)}catch(p){a("Failed to fetch existing metadata columns."),console.error(p)}finally{l(!1)}})()},[e,o]),{existingMetadataColumns:r,loading:n,error:i}}const Xr=({folderId:e})=>{const{modals:o,closeModal:r}=A(),s=o.selectMetadataColumns,{metadataList:n}=ht(),{existingMetadataColumns:l,loading:i,error:a}=Jr({folderId:e,isOpen:s}),{data:d,setData:p,post:f,processing:m,errors:b}=ee({metadata_ids:[]});u.useEffect(()=>{const g=l.map(y=>y.id);p("metadata_ids",g)},[s,l]);const v=g=>{const y=d.metadata_ids;y.includes(g)?p("metadata_ids",y.filter(w=>w!==g)):p("metadata_ids",[...y,g])},x=()=>{f(route("folder.selectMetadataColumn",e),{onSuccess:()=>{r("selectMetadataColumns"),E.show({title:"Success",message:"Metadata columns selected successfully"})},onError:g=>{console.error(g),E.show({title:"Error",message:"Failed to select metadata columns"})}})};return t.jsx(ie,{opened:s,onClose:()=>r("selectMetadataColumns"),title:"Select Columns",children:t.jsxs(H,{children:[t.jsx(D,{children:"Select the metadata columns you want to display:"}),i?t.jsx(D,{children:"Loading..."}):a?t.jsx(D,{c:"red",children:a}):t.jsxs(z,{dir:"column",children:[t.jsx(He,{label:"Name",checked:!0,disabled:!0}),t.jsx(He,{label:"Date",checked:!0,disabled:!0}),n.map(g=>t.jsx(He,{label:g.name,checked:d.metadata_ids.includes(g.id),onChange:()=>v(g.id)},g.id))]}),b.metadata_ids&&t.jsx(D,{c:"red",children:b.metadata_ids}),t.jsxs(z,{justify:"flex-end",mt:"md",children:[t.jsx(C,{variant:"outline",onClick:()=>r("selectMetadataColumns"),children:"Cancel"}),t.jsx(C,{onClick:x,loading:m,children:"Save"})]})]})})};function Ms({itemParent:e,itemAncestors:o,itemContents:r}){var b;const s=u.useRef(null),{uploadFiles:n}=Gr(e),{selectedRecord:l,setSelectedRecord:i,ids:a}=Yr(),{openFolder:d}=Vr(),{openDocument:p}=qr(),f=(b=e.metadata_columns)==null?void 0:b.map(v=>({accessor:`metadata_${v.id}`,title:v.name,render:x=>{var y;const g=(y=x.metadata)==null?void 0:y.find(w=>w.id===v.id);return g?g.value:null}})),m=[{accessor:"name",render:({mime:v,type:x,name:g,status:y,missing_required_metadata:w})=>t.jsxs(z,{align:"center",gap:12,children:[t.jsx(ot,{mime:v??"",isFolder:x==="folder",approvalStatus:y,missingRequiredMetadata:w}),t.jsx("span",{children:g})]})},{accessor:"updated_at",title:"Last Modified"},...f??[]];return t.jsxs(t.Fragment,{children:[t.jsx(Qo,{title:"My Files"}),t.jsx(at,{toolbar:l.length>0?t.jsx(Hr,{setSelectedRecord:i,selectedIds:a,parentId:e.item_id}):t.jsx(Lr,{itemParent:e,uploadFileRef:s}),children:t.jsx(_r,{onDrop:n,openRef:s,children:t.jsxs(H,{px:8,gap:24,py:8,style:{pointerEvents:"all"},children:[t.jsx(it,{ancestors:o}),r.length?t.jsx(et,{textSelectionDisabled:!0,columns:m,records:r,customRowAttributes:({type:v,id:x})=>({onDoubleClick:g=>{g.button===0&&(v==="folder"?d(v,x):v==="document"&&p(v,x))}}),highlightOnHover:!0,verticalSpacing:"lg",horizontalSpacing:"xl",selectedRecords:l,onSelectedRecordsChange:i}):t.jsx(D,{size:"lg",c:"gray.5",children:"This folder is empty"})]})})}),t.jsx(Xr,{folderId:e.item_id})]})}export{Ms as default};
