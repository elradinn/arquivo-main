import{j as e,b as n,M as F,y as g}from"./app-BiGyPfMK.js";import{Y as T}from"./index-Bc4Ekuao.js";import{u as C}from"./NotificationMenu-DPqMAYbW.js";import{B as m}from"./Button-COte_OGg.js";import{c as O}from"./IconUser-BFbH5oMy.js";import{T as _,F as v}from"./OfficeLogo-CxWVaEIh.js";import{S as k}from"./Stack-Bd72W4yI.js";import{S as x}from"./Select-cTTgXoF1.js";import{D as f}from"./DatePickerInput-C_MxIuFk.js";/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var w=O("outline","filter","IconFilter",[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]]);const M=({records:i,totalRecords:c,recordsPerPage:u,page:p,onPageChange:a})=>e.jsx(T,{pinLastColumn:!0,withTableBorder:!0,shadow:"xs",borderRadius:"sm",withRowBorders:!1,highlightOnHover:!0,verticalSpacing:"lg",horizontalSpacing:"xl",totalRecords:c,recordsPerPage:u,page:p,onPageChange:a,columns:[{accessor:"date",title:"Date",noWrap:!0},{accessor:"time",title:"Time",noWrap:!0},{accessor:"user_name",title:"User",noWrap:!0},{accessor:"subject_type",title:"Object Type",noWrap:!0},{accessor:"subject_name",title:"Object",noWrap:!0},{accessor:"description",title:"Description",noWrap:!0}],records:i}),Y=({users:i,objectTypes:c})=>{const[u,{open:p,close:a}]=C(!1),[d,h]=n.useState(null),[r,S]=n.useState(null),[s,b]=n.useState(null),[o,j]=n.useState(null);console.log(r);const y=t=>{t.preventDefault();const l={};d&&(l.user_id=d),r&&(l.object_type=r),s&&o&&(l.start_date=s.toISOString().split("T")[0],l.end_date=o.toISOString().split("T")[0]),g.get("/activity-log",l,{replace:!0,preserveState:!0}),a()},D=()=>{h(null),S(null),b(null),j(null),g.get("/activity-log",{},{replace:!0,preserveState:!0}),a()};return e.jsxs(e.Fragment,{children:[e.jsx(m,{variant:"subtle",color:"dark.3",leftSection:e.jsx(w,{size:18}),onClick:p,children:"Filter"}),e.jsx(F,{opened:u,onClose:a,title:e.jsx(_,{fw:"bold",size:"lg",children:"Filter Activity Log"}),size:"550",children:e.jsxs("form",{onSubmit:y,children:[e.jsxs(k,{gap:16,children:[e.jsx(x,{label:"User",placeholder:"Select a user",data:i.map(t=>({value:t.id.toString(),label:t.name})),value:d,onChange:h,clearable:!0}),e.jsx(x,{label:"Object Type",placeholder:"Select object type",data:c.map(t=>({value:t.value,label:t.label})),value:r,onChange:S,clearable:!0}),e.jsxs(v,{gap:16,children:[e.jsx(f,{label:"Start Date",placeholder:"Select start date",value:s,onChange:b,maxDate:o||void 0}),e.jsx(f,{label:"End Date",placeholder:"Select end date",value:o,onChange:j,minDate:s||void 0})]})]}),e.jsxs(v,{align:"center",justify:"space-between",mt:16,children:[e.jsx(m,{variant:"outline",color:"gray",onClick:D,children:"Reset Filters"}),e.jsx(m,{ml:12,type:"submit",children:"Apply Filters"})]})]})})]})};export{M as A,Y as F};
