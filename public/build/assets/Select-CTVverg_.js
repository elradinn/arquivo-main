import{b as D,j as r,t as Oe,f as Ee,u as Ie,D as Ae}from"./app-C6XG0cSQ.js";import{S as Pe,u as Ve}from"./Popover-BCpZ3lUS.js";import{C as p,c as K,u as Fe}from"./Combobox-BgJjN5zh.js";import{C as ke}from"./CheckIcon-FTcshgDl.js";import{I as X}from"./InputBase-B0vbIfZ1.js";import{u as Q}from"./use-uncontrolled-BOMjDmSw.js";function Ne(e){const t=D.useRef();return D.useEffect(()=>{t.current=e},[e]),t.current}function Y(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>Y(t))}:e}function _e(e){return e?e.map(t=>Y(t)):[]}function Z(e){return e.reduce((t,o)=>"group"in o?{...t,...Z(o.items)}:(t[o.value]=o,t),{})}function P(e){return"group"in e}function ee({options:e,search:t,limit:o}){const d=t.trim().toLowerCase(),n=[];for(let s=0;s<e.length;s+=1){const i=e[s];if(n.length===o)return n;P(i)&&n.push({group:i.group,items:ee({options:i.items,search:t,limit:o-n.length})}),P(i)||i.label.toLowerCase().includes(d)&&n.push(i)}return n}function Be(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function te(e,t=new Set){if(Array.isArray(e))for(const o of e)if(P(o))te(o.items,t);else{if(typeof o.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof o.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof o.value}`);if(t.has(o.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${o.value}" was provided more than once`);t.add(o.value)}}function ze(e,t){return Array.isArray(e)?e.includes(t):e===t}function oe({data:e,withCheckIcon:t,value:o,checkIconPosition:d,unstyled:n,renderOption:s}){if(!P(e)){const l=ze(o,e.value),x=t&&l&&r.jsx(ke,{className:K.optionsDropdownCheckIcon}),g=r.jsxs(r.Fragment,{children:[d==="left"&&x,r.jsx("span",{children:e.label}),d==="right"&&x]});return r.jsx(p.Option,{value:e.value,disabled:e.disabled,className:Oe({[K.optionsDropdownOption]:!n}),"data-reverse":d==="right"||void 0,"data-checked":l||void 0,"aria-selected":l,active:l,children:typeof s=="function"?s({option:e,checked:l}):g})}const i=e.items.map(l=>r.jsx(oe,{data:l,value:o,unstyled:n,withCheckIcon:t,checkIconPosition:d,renderOption:s},l.value));return r.jsx(p.Group,{label:e.group,children:i})}function Le({data:e,hidden:t,hiddenWhenEmpty:o,filter:d,search:n,limit:s,maxDropdownHeight:i,withScrollArea:l=!0,filterOptions:x=!0,withCheckIcon:g=!1,value:O,checkIconPosition:E,nothingFoundMessage:y,unstyled:I,labelId:B,renderOption:V,scrollAreaProps:w,"aria-label":z}){te(e);const S=typeof n=="string"?(d||ee)({options:e,search:x?n:"",limit:s??1/0}):e,k=Be(S),m=S.map(h=>r.jsx(oe,{data:h,withCheckIcon:g,value:O,checkIconPosition:E,unstyled:I,renderOption:V},P(h)?h.group:h.value));return r.jsx(p.Dropdown,{hidden:t||o&&k,children:r.jsxs(p.Options,{labelledBy:B,"aria-label":z,children:[l?r.jsx(Pe.Autosize,{mah:i??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...w,children:m}):m,k&&y&&r.jsx(p.Empty,{children:y})]})})}const Re={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},re=Ee((e,t)=>{const o=Ie("Select",Re,e),{classNames:d,styles:n,unstyled:s,vars:i,dropdownOpened:l,defaultDropdownOpened:x,onDropdownClose:g,onDropdownOpen:O,onFocus:E,onBlur:y,onClick:I,onChange:B,data:V,value:w,defaultValue:z,selectFirstOptionOnChange:F,onOptionSubmit:S,comboboxProps:k,readOnly:m,disabled:h,filter:ne,limit:se,withScrollArea:le,maxDropdownHeight:ae,size:N,searchable:v,rightSection:ie,checkIconPosition:ue,withCheckIcon:ce,nothingFoundMessage:G,name:pe,form:de,searchValue:fe,defaultSearchValue:he,onSearchChange:be,allowDeselect:ge,error:H,rightSectionPointerEvents:me,id:ve,clearable:xe,clearButtonProps:ye,hiddenInputProps:we,renderOption:Se,onClear:L,autoComplete:Ce,scrollAreaProps:je,..._}=o,R=D.useMemo(()=>_e(V),[V]),A=D.useMemo(()=>Z(R),[R]),M=Ae(ve),[f,U,De]=Q({value:w,defaultValue:z,finalValue:null,onChange:B}),u=typeof f=="string"?A[f]:void 0,C=Ne(u),[T,j]=Q({value:fe,defaultValue:he,finalValue:u?u.label:"",onChange:be}),c=Fe({opened:l,defaultOpened:x,onDropdownOpen:()=>{O==null||O(),c.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{g==null||g(),c.resetSelectedOption()}}),{resolvedClassNames:W,resolvedStyles:q}=Ve({props:o,styles:n,classNames:d});D.useEffect(()=>{F&&c.selectFirstOption()},[F,f]),D.useEffect(()=>{w===null&&j(""),typeof w=="string"&&u&&((C==null?void 0:C.value)!==u.value||(C==null?void 0:C.label)!==u.label)&&j(u.label)},[w,u]);const J=xe&&!!f&&!h&&!m&&r.jsx(p.ClearButton,{size:N,...ye,onClear:()=>{U(null,null),j(""),L==null||L()}});return r.jsxs(r.Fragment,{children:[r.jsxs(p,{store:c,__staticSelector:"Select",classNames:W,styles:q,unstyled:s,readOnly:m,onOptionSubmit:a=>{S==null||S(a);const b=ge&&A[a].value===f?null:A[a],$=b?b.value:null;$!==f&&U($,b),!De&&j(typeof $=="string"&&(b==null?void 0:b.label)||""),c.closeDropdown()},size:N,...k,children:[r.jsx(p.Target,{targetType:v?"input":"button",autoComplete:Ce,children:r.jsx(X,{id:M,ref:t,rightSection:ie||J||r.jsx(p.Chevron,{size:N,error:H,unstyled:s}),rightSectionPointerEvents:me||(J?"all":"none"),..._,size:N,__staticSelector:"Select",disabled:h,readOnly:m||!v,value:T,onChange:a=>{j(a.currentTarget.value),c.openDropdown(),F&&c.selectFirstOption()},onFocus:a=>{v&&c.openDropdown(),E==null||E(a)},onBlur:a=>{var b;v&&c.closeDropdown(),j(f!=null&&((b=A[f])==null?void 0:b.label)||""),y==null||y(a)},onClick:a=>{v?c.openDropdown():c.toggleDropdown(),I==null||I(a)},classNames:W,styles:q,unstyled:s,pointer:!v,error:H})}),r.jsx(Le,{data:R,hidden:m||h,filter:ne,search:T,limit:se,hiddenWhenEmpty:!G,withScrollArea:le,maxDropdownHeight:ae,filterOptions:v&&(u==null?void 0:u.label)!==T,value:f,checkIconPosition:ue,withCheckIcon:ce,nothingFoundMessage:G,unstyled:s,labelId:_.label?`${M}-label`:void 0,"aria-label":_.label?void 0:_["aria-label"],renderOption:Se,scrollAreaProps:je})]}),r.jsx(p.HiddenInput,{value:f,name:pe,form:de,disabled:h,...we})]})});re.classes={...X.classes,...p.classes};re.displayName="@mantine/core/Select";export{re as S};
