import{b as D,j as r,o as Oe,f as Ee,u as Ie,q as Ae}from"./app-B1t0nWF2.js";import{u as Pe}from"./Popover-CNN9VJPa.js";import{C as p,c as K,u as Ve}from"./Combobox-BJIKhSN8.js";import{C as Fe}from"./CheckIcon-CXwCS6ms.js";import{S as ke}from"./ScrollArea-BzIzn8kk.js";import{I as X}from"./InputBase-wHy3O5_x.js";import{u as Q}from"./use-uncontrolled-DXGPZ-HS.js";function Ne(e){const o=D.useRef();return D.useEffect(()=>{o.current=e},[e]),o.current}function Y(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(o=>Y(o))}:e}function _e(e){return e?e.map(o=>Y(o)):[]}function Z(e){return e.reduce((o,t)=>"group"in t?{...o,...Z(t.items)}:(o[t.value]=t,o),{})}function P(e){return"group"in e}function ee({options:e,search:o,limit:t}){const d=o.trim().toLowerCase(),n=[];for(let s=0;s<e.length;s+=1){const i=e[s];if(n.length===t)return n;P(i)&&n.push({group:i.group,items:ee({options:i.items,search:o,limit:t-n.length})}),P(i)||i.label.toLowerCase().includes(d)&&n.push(i)}return n}function Be(e){if(e.length===0)return!0;for(const o of e)if(!("group"in o)||o.items.length>0)return!1;return!0}function oe(e,o=new Set){if(Array.isArray(e))for(const t of e)if(P(t))oe(t.items,o);else{if(typeof t.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof t.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof t.value}`);if(o.has(t.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${t.value}" was provided more than once`);o.add(t.value)}}function ze(e,o){return Array.isArray(e)?e.includes(o):e===o}function te({data:e,withCheckIcon:o,value:t,checkIconPosition:d,unstyled:n,renderOption:s}){if(!P(e)){const l=ze(t,e.value),x=o&&l&&r.jsx(Fe,{className:K.optionsDropdownCheckIcon}),m=r.jsxs(r.Fragment,{children:[d==="left"&&x,r.jsx("span",{children:e.label}),d==="right"&&x]});return r.jsx(p.Option,{value:e.value,disabled:e.disabled,className:Oe({[K.optionsDropdownOption]:!n}),"data-reverse":d==="right"||void 0,"data-checked":l||void 0,"aria-selected":l,active:l,children:typeof s=="function"?s({option:e,checked:l}):m})}const i=e.items.map(l=>r.jsx(te,{data:l,value:t,unstyled:n,withCheckIcon:o,checkIconPosition:d,renderOption:s},l.value));return r.jsx(p.Group,{label:e.group,children:i})}function Le({data:e,hidden:o,hiddenWhenEmpty:t,filter:d,search:n,limit:s,maxDropdownHeight:i,withScrollArea:l=!0,filterOptions:x=!0,withCheckIcon:m=!1,value:O,checkIconPosition:E,nothingFoundMessage:y,unstyled:I,labelId:B,renderOption:V,scrollAreaProps:w,"aria-label":z}){oe(e);const S=typeof n=="string"?(d||ee)({options:e,search:x?n:"",limit:s??1/0}):e,k=Be(S),g=S.map(h=>r.jsx(te,{data:h,withCheckIcon:m,value:O,checkIconPosition:E,unstyled:I,renderOption:V},P(h)?h.group:h.value));return r.jsx(p.Dropdown,{hidden:o||t&&k,children:r.jsxs(p.Options,{labelledBy:B,"aria-label":z,children:[l?r.jsx(ke.Autosize,{mah:i??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...w,children:g}):g,k&&y&&r.jsx(p.Empty,{children:y})]})})}const Re={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},re=Ee((e,o)=>{const t=Ie("Select",Re,e),{classNames:d,styles:n,unstyled:s,vars:i,dropdownOpened:l,defaultDropdownOpened:x,onDropdownClose:m,onDropdownOpen:O,onFocus:E,onBlur:y,onClick:I,onChange:B,data:V,value:w,defaultValue:z,selectFirstOptionOnChange:F,onOptionSubmit:S,comboboxProps:k,readOnly:g,disabled:h,filter:ne,limit:se,withScrollArea:le,maxDropdownHeight:ae,size:N,searchable:v,rightSection:ie,checkIconPosition:ue,withCheckIcon:ce,nothingFoundMessage:G,name:pe,form:de,searchValue:fe,defaultSearchValue:he,onSearchChange:be,allowDeselect:me,error:H,rightSectionPointerEvents:ge,id:ve,clearable:xe,clearButtonProps:ye,hiddenInputProps:we,renderOption:Se,onClear:L,autoComplete:Ce,scrollAreaProps:je,..._}=t,R=D.useMemo(()=>_e(V),[V]),A=D.useMemo(()=>Z(R),[R]),M=Ae(ve),[f,q,De]=Q({value:w,defaultValue:z,finalValue:null,onChange:B}),u=typeof f=="string"?A[f]:void 0,C=Ne(u),[T,j]=Q({value:fe,defaultValue:he,finalValue:u?u.label:"",onChange:be}),c=Ve({opened:l,defaultOpened:x,onDropdownOpen:()=>{O==null||O(),c.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{m==null||m(),c.resetSelectedOption()}}),{resolvedClassNames:U,resolvedStyles:W}=Pe({props:t,styles:n,classNames:d});D.useEffect(()=>{F&&c.selectFirstOption()},[F,f]),D.useEffect(()=>{w===null&&j(""),typeof w=="string"&&u&&((C==null?void 0:C.value)!==u.value||(C==null?void 0:C.label)!==u.label)&&j(u.label)},[w,u]);const J=xe&&!!f&&!h&&!g&&r.jsx(p.ClearButton,{size:N,...ye,onClear:()=>{q(null,null),j(""),L==null||L()}});return r.jsxs(r.Fragment,{children:[r.jsxs(p,{store:c,__staticSelector:"Select",classNames:U,styles:W,unstyled:s,readOnly:g,onOptionSubmit:a=>{S==null||S(a);const b=me&&A[a].value===f?null:A[a],$=b?b.value:null;$!==f&&q($,b),!De&&j(typeof $=="string"&&(b==null?void 0:b.label)||""),c.closeDropdown()},size:N,...k,children:[r.jsx(p.Target,{targetType:v?"input":"button",autoComplete:Ce,children:r.jsx(X,{id:M,ref:o,rightSection:ie||J||r.jsx(p.Chevron,{size:N,error:H,unstyled:s}),rightSectionPointerEvents:ge||(J?"all":"none"),..._,size:N,__staticSelector:"Select",disabled:h,readOnly:g||!v,value:T,onChange:a=>{j(a.currentTarget.value),c.openDropdown(),F&&c.selectFirstOption()},onFocus:a=>{v&&c.openDropdown(),E==null||E(a)},onBlur:a=>{var b;v&&c.closeDropdown(),j(f!=null&&((b=A[f])==null?void 0:b.label)||""),y==null||y(a)},onClick:a=>{v?c.openDropdown():c.toggleDropdown(),I==null||I(a)},classNames:U,styles:W,unstyled:s,pointer:!v,error:H})}),r.jsx(Le,{data:R,hidden:g||h,filter:ne,search:T,limit:se,hiddenWhenEmpty:!G,withScrollArea:le,maxDropdownHeight:ae,filterOptions:v&&(u==null?void 0:u.label)!==T,value:f,checkIconPosition:ue,withCheckIcon:ce,nothingFoundMessage:G,unstyled:s,labelId:_.label?`${M}-label`:void 0,"aria-label":_.label?void 0:_["aria-label"],renderOption:Se,scrollAreaProps:je})]}),r.jsx(p.HiddenInput,{value:f,name:pe,form:de,disabled:h,...we})]})});re.classes={...X.classes,...p.classes};re.displayName="@mantine/core/Select";export{re as S};
