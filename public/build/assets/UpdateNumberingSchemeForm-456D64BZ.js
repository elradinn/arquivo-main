import{R as ce,b as T,j as d,f as tt,u as rt,d as nt,h as at,U as Te,t as it,i as ot,e as ut,m as st,c as lt,W as qe,n as xe,M as $e,P as ct}from"./app-Bi-kKfSQ.js";import{u as Re,b as Ae,a as Me}from"./Authenticated-C_lZwoKT.js";import{T as fe,F as We}from"./OfficeLogo-2ZaB1g-B.js";import{B as de}from"./Button-1yfY3Uus.js";import{S as ft}from"./Stack-D9KjGeyZ.js";import{T as Fe}from"./TextInput-D9HeubEm.js";import{G as Ce,A as Be}from"./NotificationMenu-C937_Mzw.js";import{S as Pe}from"./Select-ChKntED6.js";import{u as dt}from"./Popover-DE1Ul7Ry.js";import{I as Ge}from"./InputBase-UL63YNSc.js";import{u as mt}from"./use-uncontrolled-BwiKmmNw.js";import{c as Ne}from"./clamp-DTmYCdls.js";function Ze(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r}var Se;(function(e){e.event="event",e.props="prop"})(Se||(Se={}));function re(){}function vt(e){var t,r=void 0;return function(){for(var a=[],n=arguments.length;n--;)a[n]=arguments[n];return t&&a.length===t.length&&a.every(function(o,u){return o===t[u]})||(t=a,r=e.apply(void 0,a)),r}}function be(e){return!!(e||"").match(/\d/)}function me(e){return e==null}function gt(e){return typeof e=="number"&&isNaN(e)}function Ye(e){return me(e)||gt(e)||typeof e=="number"&&!isFinite(e)}function He(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function ht(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function pt(e,t,r){var a=ht(r),n=e.search(/[1-9]/);return n=n===-1?e.length:n,e.substring(0,n)+e.substring(n,e.length).replace(a,"$1"+t)}function xt(e){var t=T.useRef(e);t.current=e;var r=T.useRef(function(){for(var a=[],n=arguments.length;n--;)a[n]=arguments[n];return t.current.apply(t,a)});return r.current}function Ee(e,t){t===void 0&&(t=!0);var r=e[0]==="-",a=r&&t;e=e.replace("-","");var n=e.split("."),o=n[0],u=n[1]||"";return{beforeDecimal:o,afterDecimal:u,hasNegation:r,addNegation:a}}function St(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var r=e.split("."),a=r[0].replace(/^0+/,"")||"0",n=r[1]||"";return(t?"-":"")+a+(n?"."+n:"")}function Xe(e,t,r){for(var a="",n=r?"0":"",o=0;o<=t-1;o++)a+=e[o]||n;return a}function Oe(e,t){return Array(t+1).join(e)}function Je(e){var t=e+"",r=t[0]==="-"?"-":"";r&&(t=t.substring(1));var a=t.split(/[eE]/g),n=a[0],o=a[1];if(o=Number(o),!o)return r+n;n=n.replace(".","");var u=1+o,D=n.length;return u<0?n="0."+Oe("0",Math.abs(u))+n:u>=D?n=n+Oe("0",u-D):n=(n.substring(0,u)||"0")+"."+n.substring(u),r+n}function ke(e,t,r){if(["","-"].indexOf(e)!==-1)return e;var a=(e.indexOf(".")!==-1||r)&&t,n=Ee(e),o=n.beforeDecimal,u=n.afterDecimal,D=n.hasNegation,V=parseFloat("0."+(u||"0")),h=u.length<=t?"0."+u:V.toFixed(t),b=h.split("."),y=o;o&&Number(b[0])&&(y=o.split("").reverse().reduce(function(C,v,c){return C.length>c?(Number(C[0])+Number(v)).toString()+C.substring(1,C.length):v+C},b[0]));var m=Xe(b[1]||"",t,r),p=D?"-":"",f=a?".":"";return""+p+y+f+m}function se(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var r=e.createTextRange();return r.move("character",t),r.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Qe=vt(function(e,t){for(var r=0,a=0,n=e.length,o=t.length;e[r]===t[r]&&r<n;)r++;for(;e[n-1-a]===t[o-1-a]&&o-a>r&&n-a>r;)a++;return{from:{start:r,end:n-a},to:{start:r,end:o-a}}}),bt=function(e,t){var r=Math.min(e.selectionStart,t);return{from:{start:r,end:e.selectionEnd},to:{start:r,end:t}}};function yt(e,t,r){return Math.min(Math.max(e,t),r)}function Ie(e){return Math.max(e.selectionStart,e.selectionEnd)}function Nt(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function wt(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function Dt(e){var t=e.currentValue,r=e.formattedValue,a=e.currentValueIndex,n=e.formattedValueIndex;return t[a]===r[n]}function Vt(e,t,r,a,n,o,u){u===void 0&&(u=Dt);var D=n.findIndex(function(Z){return Z}),V=e.slice(0,D);!t&&!r.startsWith(V)&&(t=V,r=V+r,a=a+V.length);for(var h=r.length,b=e.length,y={},m=new Array(h),p=0;p<h;p++){m[p]=-1;for(var f=0,C=b;f<C;f++){var v=u({currentValue:r,lastValue:t,formattedValue:e,currentValueIndex:p,formattedValueIndex:f});if(v&&y[f]!==!0){m[p]=f,y[f]=!0;break}}}for(var c=a;c<h&&(m[c]===-1||!o(r[c]));)c++;var w=c===h||m[c]===-1?b:m[c];for(c=a-1;c>0&&m[c]===-1;)c--;var A=c===-1||m[c]===-1?0:m[c]+1;return A>w?w:a-A<w-a?A:w}function Le(e,t,r,a){var n=e.length;if(t=yt(t,0,n),a==="left"){for(;t>=0&&!r[t];)t--;t===-1&&(t=r.indexOf(!0))}else{for(;t<=n&&!r[t];)t++;t>n&&(t=r.lastIndexOf(!0))}return t===-1&&(t=n),t}function Ct(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),r=0,a=t.length;r<a;r++)t[r]=!!(be(e[r])||be(e[r-1]));return t}function et(e,t,r,a,n,o){o===void 0&&(o=re);var u=xt(function(f,C){var v,c;return Ye(f)?(c="",v=""):typeof f=="number"||C?(c=typeof f=="number"?Je(f):f,v=a(c)):(c=n(f,void 0),v=a(c)),{formattedValue:v,numAsString:c}}),D=T.useState(function(){return u(me(e)?t:e,r)}),V=D[0],h=D[1],b=function(f,C){f.formattedValue!==V.formattedValue&&h({formattedValue:f.formattedValue,numAsString:f.value}),o(f,C)},y=e,m=r;me(e)&&(y=V.numAsString,m=!0);var p=u(y,m);return T.useMemo(function(){h(p)},[p.formattedValue]),[V,b]}function It(e){return e.replace(/[^0-9]/g,"")}function jt(e){return e}function Rt(e){var t=e.type;t===void 0&&(t="text");var r=e.displayType;r===void 0&&(r="input");var a=e.customInput,n=e.renderText,o=e.getInputRef,u=e.format;u===void 0&&(u=jt);var D=e.removeFormatting;D===void 0&&(D=It);var V=e.defaultValue,h=e.valueIsNumericString,b=e.onValueChange,y=e.isAllowed,m=e.onChange;m===void 0&&(m=re);var p=e.onKeyDown;p===void 0&&(p=re);var f=e.onMouseUp;f===void 0&&(f=re);var C=e.onFocus;C===void 0&&(C=re);var v=e.onBlur;v===void 0&&(v=re);var c=e.value,w=e.getCaretBoundary;w===void 0&&(w=Ct);var A=e.isValidInputCharacter;A===void 0&&(A=be);var Z=e.isCharacterSame,U=Ze(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),Y=et(c,V,!!h,u,D,b),z=Y[0],I=z.formattedValue,L=z.numAsString,K=Y[1],W=T.useRef(),H=T.useRef({formattedValue:I,numAsString:L}),G=function(s,l){H.current={formattedValue:s.formattedValue,numAsString:s.value},K(s,l)},Q=T.useState(!1),ne=Q[0],g=Q[1],x=T.useRef(null),j=T.useRef({setCaretTimeout:null,focusTimeout:null});T.useEffect(function(){return g(!0),function(){clearTimeout(j.current.setCaretTimeout),clearTimeout(j.current.focusTimeout)}},[]);var B=u,P=function(s,l){var S=parseFloat(l);return{formattedValue:s,value:l,floatValue:isNaN(S)?void 0:S}},M=function(s,l,S){s.selectionStart===0&&s.selectionEnd===s.value.length||(se(s,l),j.current.setCaretTimeout=setTimeout(function(){s.value===S&&s.selectionStart!==l&&se(s,l)},0))},F=function(s,l,S){return Le(s,l,w(s),S)},ee=function(s,l,S){var R=w(l),O=Vt(l,I,s,S,R,A,Z);return O=Le(l,O,R),O},ve=function(s){var l=s.formattedValue;l===void 0&&(l="");var S=s.input,R=s.source,O=s.event,_=s.numAsString,i;if(S){var N=s.inputValue||S.value,k=Ie(S);S.value=l,i=ee(N,l,k),i!==void 0&&M(S,i,l)}l!==I&&G(P(l,_),{event:O,source:R})};T.useEffect(function(){var s=H.current,l=s.formattedValue,S=s.numAsString;(I!==l||L!==S)&&G(P(I,L),{event:void 0,source:Se.props})},[I,L]);var E=x.current?Ie(x.current):void 0,ae=typeof window<"u"?T.useLayoutEffect:T.useEffect;ae(function(){var s=x.current;if(I!==H.current.formattedValue&&s){var l=ee(H.current.formattedValue,I,E);s.value=I,M(s,l,I)}},[I]);var ye=function(s,l,S){var R=l.target,O=W.current?bt(W.current,R.selectionEnd):Qe(I,s),_=Object.assign(Object.assign({},O),{lastValue:I}),i=D(s,_),N=B(i);if(i=D(N,void 0),y&&!y(P(N,i))){var k=l.target,q=Ie(k),$=ee(s,I,q);return k.value=I,M(k,$,I),!1}return ve({formattedValue:N,numAsString:i,inputValue:s,event:l,source:S,input:l.target}),!0},X=function(s,l){l===void 0&&(l=0);var S=s.selectionStart,R=s.selectionEnd;W.current={selectionStart:S,selectionEnd:R+l}},ie=function(s){var l=s.target,S=l.value,R=ye(S,s,Se.event);R&&m(s),W.current=void 0},ge=function(s){var l=s.target,S=s.key,R=l.selectionStart,O=l.selectionEnd,_=l.value;_===void 0&&(_="");var i;S==="ArrowLeft"||S==="Backspace"?i=Math.max(R-1,0):S==="ArrowRight"?i=Math.min(R+1,_.length):S==="Delete"&&(i=R);var N=0;S==="Delete"&&R===O&&(N=1);var k=S==="ArrowLeft"||S==="ArrowRight";if(i===void 0||R!==O&&!k){p(s),X(l,N);return}var q=i;if(k){var $=S==="ArrowLeft"?"left":"right";q=F(_,i,$),q!==i&&s.preventDefault()}else S==="Delete"&&!A(_[i])?q=F(_,i,"right"):S==="Backspace"&&!A(_[i])&&(q=F(_,i,"left"));q!==i&&M(l,q,_),p(s),X(l,N)},De=function(s){var l=s.target,S=function(){var R=l.selectionStart,O=l.selectionEnd,_=l.value;if(_===void 0&&(_=""),R===O){var i=F(_,R);i!==R&&M(l,i,_)}};S(),requestAnimationFrame(function(){S()}),f(s),X(l)},oe=function(s){s.persist&&s.persist();var l=s.target,S=s.currentTarget;x.current=l,j.current.focusTimeout=setTimeout(function(){var R=l.selectionStart,O=l.selectionEnd,_=l.value;_===void 0&&(_="");var i=F(_,R);i!==R&&!(R===0&&O===_.length)&&M(l,i,_),C(Object.assign(Object.assign({},s),{currentTarget:S}))},0)},he=function(s){x.current=null,clearTimeout(j.current.focusTimeout),clearTimeout(j.current.setCaretTimeout),v(s)},le=ne&&Nt()?"numeric":void 0,ue=Object.assign({inputMode:le},U,{type:t,value:I,onChange:ie,onKeyDown:ge,onMouseUp:De,onFocus:oe,onBlur:he});if(r==="text")return n?ce.createElement(ce.Fragment,null,n(I,U)||null):ce.createElement("span",Object.assign({},U,{ref:o}),I);if(a){var Ve=a;return ce.createElement(Ve,Object.assign({},ue,{ref:o}))}return ce.createElement("input",Object.assign({},ue,{ref:o}))}function Ue(e,t){var r=t.decimalScale,a=t.fixedDecimalScale,n=t.prefix;n===void 0&&(n="");var o=t.suffix;o===void 0&&(o="");var u=t.allowNegative,D=t.thousandsGroupStyle;if(D===void 0&&(D="thousand"),e===""||e==="-")return e;var V=we(t),h=V.thousandSeparator,b=V.decimalSeparator,y=r!==0&&e.indexOf(".")!==-1||r&&a,m=Ee(e,u),p=m.beforeDecimal,f=m.afterDecimal,C=m.addNegation;return r!==void 0&&(f=Xe(f,r,!!a)),h&&(p=pt(p,h,D)),n&&(p=n+p),o&&(f=f+o),C&&(p="-"+p),e=p+(y&&b||"")+f,e}function we(e){var t=e.decimalSeparator;t===void 0&&(t=".");var r=e.thousandSeparator,a=e.allowedDecimalSeparators;return r===!0&&(r=","),a||(a=[t,"."]),{decimalSeparator:t,thousandSeparator:r,allowedDecimalSeparators:a}}function Et(e,t){e===void 0&&(e="");var r=new RegExp("(-)"),a=new RegExp("(-)(.)*(-)"),n=r.test(e),o=a.test(e);return e=e.replace(/-/g,""),n&&!o&&t&&(e="-"+e),e}function _t(e,t){return new RegExp("(^-)|[0-9]|"+He(e),"g")}function Tt(e,t,r){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(r!=null&&r.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function At(e,t,r){var a;t===void 0&&(t=wt(e));var n=r.allowNegative,o=r.prefix;o===void 0&&(o="");var u=r.suffix;u===void 0&&(u="");var D=r.decimalScale,V=t.from,h=t.to,b=h.start,y=h.end,m=we(r),p=m.allowedDecimalSeparators,f=m.decimalSeparator,C=e[y]===f;if(be(e)&&(e===o||e===u)&&t.lastValue==="")return e;if(y-b===1&&p.indexOf(e[b])!==-1){var v=D===0?"":f;e=e.substring(0,b)+v+e.substring(b+1,e.length)}var c=function(x,j,B){var P=!1,M=!1;o.startsWith("-")?P=!1:x.startsWith("--")?(P=!1,M=!0):u.startsWith("-")&&x.length===u.length?P=!1:x[0]==="-"&&(P=!0);var F=P?1:0;return M&&(F=2),F&&(x=x.substring(F),j-=F,B-=F),{value:x,start:j,end:B,hasNegation:P}},w=c(e,b,y),A=w.hasNegation;a=w,e=a.value,b=a.start,y=a.end;var Z=c(t.lastValue,V.start,V.end),U=Z.start,Y=Z.end,z=Z.value,I=e.substring(b,y);e.length&&z.length&&(U>z.length-u.length||Y<o.length)&&!(I&&u.startsWith(I))&&(e=z);var L=0;e.startsWith(o)?L+=o.length:b<o.length&&(L=b),e=e.substring(L),y-=L;var K=e.length,W=e.length-u.length;e.endsWith(u)?K=W:(y>W||y>e.length-u.length)&&(K=y),e=e.substring(0,K),e=Et(A?"-"+e:e,n),e=(e.match(_t(f))||[]).join("");var H=e.indexOf(f);e=e.replace(new RegExp(He(f),"g"),function(x,j){return j===H?".":""});var G=Ee(e,n),Q=G.beforeDecimal,ne=G.afterDecimal,g=G.addNegation;return h.end-h.start<V.end-V.start&&Q===""&&C&&!parseFloat(ne)&&(e=g?"-":""),e}function Mt(e,t){var r=t.prefix;r===void 0&&(r="");var a=t.suffix;a===void 0&&(a="");var n=Array.from({length:e.length+1}).map(function(){return!0}),o=e[0]==="-";n.fill(!1,0,r.length+(o?1:0));var u=e.length;return n.fill(!1,u-a.length+1,u+1),n}function Ft(e){var t=we(e),r=t.thousandSeparator,a=t.decimalSeparator,n=e.prefix;n===void 0&&(n="");var o=e.allowNegative;if(o===void 0&&(o=!0),r===a)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+r+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+a+` (default value for decimalSeparator is .)
     `);return n.startsWith("-")&&o&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+n+`
      allowNegative: `+o+`
    `),o=!1),Object.assign(Object.assign({},e),{allowNegative:o})}function Bt(e){e=Ft(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,r=e.allowNegative,a=e.allowLeadingZeros,n=e.onKeyDown;n===void 0&&(n=re);var o=e.onBlur;o===void 0&&(o=re);var u=e.thousandSeparator,D=e.decimalScale,V=e.fixedDecimalScale,h=e.prefix;h===void 0&&(h="");var b=e.defaultValue,y=e.value,m=e.valueIsNumericString,p=e.onValueChange,f=Ze(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),C=we(e),v=C.decimalSeparator,c=C.allowedDecimalSeparators,w=function(g){return Ue(g,e)},A=function(g,x){return At(g,x,e)},Z=me(y)?b:y,U=m??Tt(Z,h,t);me(y)?me(b)||(U=U||typeof b=="number"):U=U||typeof y=="number";var Y=function(g){return Ye(g)?g:(typeof g=="number"&&(g=Je(g)),U&&typeof D=="number"?ke(g,D,!!V):g)},z=et(Y(y),Y(b),!!U,w,A,p),I=z[0],L=I.numAsString,K=I.formattedValue,W=z[1],H=function(g){var x=g.target,j=g.key,B=x.selectionStart,P=x.selectionEnd,M=x.value;if(M===void 0&&(M=""),(j==="Backspace"||j==="Delete")&&P<h.length){g.preventDefault();return}if(B!==P){n(g);return}j==="Backspace"&&M[0]==="-"&&B===h.length+1&&r&&se(x,1),D&&V&&(j==="Backspace"&&M[B-1]===v?(se(x,B-1),g.preventDefault()):j==="Delete"&&M[B]===v&&g.preventDefault()),c!=null&&c.includes(j)&&M[B]===v&&se(x,B+1);var F=u===!0?",":u;j==="Backspace"&&M[B-1]===F&&se(x,B-1),j==="Delete"&&M[B]===F&&se(x,B+1),n(g)},G=function(g){var x=L;if(x.match(/\d/g)||(x=""),a||(x=St(x)),V&&D&&(x=ke(x,D,V)),x!==L){var j=Ue(x,e);W({formattedValue:j,value:x,floatValue:parseFloat(x)},{event:g,source:Se.event})}o(g)},Q=function(g){return g===v?!0:be(g)},ne=function(g){var x=g.currentValue,j=g.lastValue,B=g.formattedValue,P=g.currentValueIndex,M=g.formattedValueIndex,F=x[P],ee=B[M],ve=Qe(j,x),E=ve.to;return P>=E.start&&P<E.end&&c&&c.includes(F)&&ee===v?!0:F===ee};return Object.assign(Object.assign({},f),{value:K,valueIsNumericString:!1,isValidInputCharacter:Q,isCharacterSame:ne,onValueChange:W,format:w,removeFormatting:A,getCaretBoundary:function(g){return Mt(g,e)},onKeyDown:H,onBlur:G})}function Pt(e){var t=Bt(e);return ce.createElement(Rt,Object.assign({},t))}function ze({direction:e,style:t,...r}){return d.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:d.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var je={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const Ot=/^(0\.0*|-0(\.0*)?)$/,kt=/^-?0\d+(\.\d+)?\.?$/;function Lt(e){return e.toString().replace(".","").length}function Ut(e,t){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)&&Lt(t)<14&&t!==""}function Ke(e,t,r){if(e===void 0)return!0;const a=t===void 0||e>=t,n=r===void 0||e<=r;return a&&n}const zt={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},Kt=ut((e,{size:t})=>({controls:{"--ni-chevron-size":st(t,"ni-chevron-size")}})),_e=tt((e,t)=>{const r=rt("NumberInput",zt,e),{className:a,classNames:n,styles:o,unstyled:u,vars:D,onChange:V,onValueChange:h,value:b,defaultValue:y,max:m,min:p,step:f,hideControls:C,rightSection:v,isAllowed:c,clampBehavior:w,onBlur:A,allowDecimal:Z,decimalScale:U,onKeyDown:Y,onKeyDownCapture:z,handlersRef:I,startValue:L,disabled:K,rightSectionPointerEvents:W,allowNegative:H,readOnly:G,size:Q,rightSectionWidth:ne,stepHoldInterval:g,stepHoldDelay:x,allowLeadingZeros:j,withKeyboardEvents:B,trimLeadingZeroesOnBlur:P,...M}=r,F=nt({name:"NumberInput",classes:je,props:r,classNames:n,styles:o,unstyled:u,vars:D,varsResolver:Kt}),{resolvedClassNames:ee,resolvedStyles:ve}=dt({classNames:n,styles:o,props:r}),[E,ae]=mt({value:b,defaultValue:y,onChange:V}),ye=x!==void 0&&g!==void 0,X=T.useRef(null),ie=T.useRef(null),ge=T.useRef(0),De=(i,N)=>{N.source==="event"&&ae(Ut(i.floatValue,i.value)&&!Ot.test(i.value)&&!(j&&kt.test(i.value))?i.floatValue:i.value),h==null||h(i,N)},oe=i=>{const N=String(i).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return N?Math.max(0,(N[1]?N[1].length:0)-(N[2]?+N[2]:0)):0},he=i=>{X.current&&typeof i<"u"&&X.current.setSelectionRange(i,i)},le=T.useRef();le.current=()=>{let i;const N=oe(E),k=oe(f),q=Math.max(N,k),$=10**q;if(typeof E!="number"||Number.isNaN(E))i=Ne(L,p,m);else if(m!==void 0){const J=(Math.round(E*$)+Math.round(f*$))/$;i=J<=m?J:m}else i=(Math.round(E*$)+Math.round(f*$))/$;const te=i.toFixed(q);ae(parseFloat(te)),h==null||h({floatValue:parseFloat(te),formattedValue:te,value:te},{source:"increment"}),setTimeout(()=>{var J;return he((J=X.current)==null?void 0:J.value.length)},0)};const ue=T.useRef();ue.current=()=>{let i;const N=p!==void 0?p:H?Number.MIN_SAFE_INTEGER:0,k=oe(E),q=oe(f),$=Math.max(k,q),te=10**$;if(typeof E!="number"||Number.isNaN(E))i=Ne(L,N,m);else{const pe=(Math.round(E*te)-Math.round(f*te))/te;i=N!==void 0&&pe<N?N:pe}const J=i.toFixed($);ae(parseFloat(J)),h==null||h({floatValue:parseFloat(J),formattedValue:J,value:J},{source:"decrement"}),setTimeout(()=>{var pe;return he((pe=X.current)==null?void 0:pe.value.length)},0)};const Ve=i=>{Y==null||Y(i),!(G||!B)&&(i.key==="ArrowUp"&&(i.preventDefault(),le.current()),i.key==="ArrowDown"&&(i.preventDefault(),ue.current()))},s=i=>{if(z==null||z(i),i.key==="Backspace"){const N=X.current;N.selectionStart===0&&N.selectionStart===N.selectionEnd&&(i.preventDefault(),window.setTimeout(()=>he(0),0))}};at(I,{increment:le.current,decrement:ue.current});const l=i=>{i?le.current():ue.current(),ge.current+=1},S=i=>{if(l(i),ye){const N=typeof g=="number"?g:g(ge.current);ie.current=window.setTimeout(()=>S(i),N)}},R=(i,N)=>{var k;i.preventDefault(),(k=X.current)==null||k.focus(),l(N),ye&&(ie.current=window.setTimeout(()=>S(N),x))},O=()=>{ie.current&&window.clearTimeout(ie.current),ie.current=null,ge.current=0},_=d.jsxs("div",{...F("controls"),children:[d.jsx(Te,{...F("control"),tabIndex:-1,"aria-hidden":!0,disabled:K||typeof E=="number"&&m!==void 0&&E>=m,mod:{direction:"up"},onMouseDown:i=>i.preventDefault(),onPointerDown:i=>{R(i,!0)},onPointerUp:O,onPointerLeave:O,children:d.jsx(ze,{direction:"up"})}),d.jsx(Te,{...F("control"),tabIndex:-1,"aria-hidden":!0,disabled:K||typeof E=="number"&&p!==void 0&&E<=p,mod:{direction:"down"},onMouseDown:i=>i.preventDefault(),onPointerDown:i=>{R(i,!1)},onPointerUp:O,onPointerLeave:O,children:d.jsx(ze,{direction:"down"})})]});return d.jsx(Ge,{component:Pt,allowNegative:H,className:it(je.root,a),size:Q,...M,readOnly:G,disabled:K,value:E,getInputRef:ot(t,X),onValueChange:De,rightSection:C||G?v:v||_,classNames:ee,styles:ve,unstyled:u,__staticSelector:"NumberInput",decimalScale:Z?U:0,onKeyDown:Ve,onKeyDownCapture:s,rightSectionPointerEvents:W??(K?"none":void 0),rightSectionWidth:ne??`var(--ni-right-section-width-${Q||"sm"})`,allowLeadingZeros:j,onBlur:i=>{if(A==null||A(i),w==="blur"&&typeof E=="number"&&Ne(E,p,m)!==E&&ae(Ne(E,p,m)),P&&typeof E=="string"&&oe(E)<15){const N=E.replace(/^0+/,""),k=parseFloat(N);ae(Number.isNaN(k)||k>Number.MAX_SAFE_INTEGER?N:k)}},isAllowed:i=>w==="strict"?c?c(i)&&Ke(i.floatValue,p,m):Ke(i.floatValue,p,m):c?c(i):!0})});_e.classes={...Ge.classes,...je};_e.displayName="@mantine/core/NumberInput";function qt({numberingSchemeId:e,isOpen:t}){const[r,a]=T.useState(null);T.useEffect(()=>{e&&t&&n(e)},[e,t]);const n=async o=>{try{const u=await lt.get(`/numbering-scheme/${o}`);a(u.data)}catch(u){console.error("Error fetching numbering scheme",u)}};return r}function $t({itemParent:e,isOpen:t}){const r=qt({numberingSchemeId:e==null?void 0:e.numbering_scheme_id,isOpen:t}),{data:a,setData:n,put:o,processing:u,errors:D,reset:V}=qe({name:"",prefix:"",next_number:0,reset_frequency:"none"}),{closeModal:h}=Re(),[b,y]=T.useState([]);return T.useEffect(()=>{if(r){const c=r.prefix.split(" ").map(w=>w.startsWith("[")&&w.endsWith("]")?{id:Date.now()+Math.random(),type:"dynamic",value:w.slice(1,-1)}:{id:Date.now()+Math.random(),type:"text",value:w});y(c),n({name:r.name||"",prefix:r.prefix||"",next_number:r.next_number||0,reset_frequency:r.reset_frequency||"none"})}},[r]),T.useEffect(()=>{const c=b.map(w=>w.type==="text"?w.value:`[${w.value}]`).join(" ");n("prefix",c)},[b]),{data:a,setData:n,handleSubmit:c=>{c.preventDefault(),o(route("numbering-scheme.update",e==null?void 0:e.numbering_scheme_id),{onSuccess:()=>{h("updateNumberingScheme"),xe.show({message:"Numbering scheme updated successfully",color:"green"})},onError:()=>{xe.show({message:"Something went wrong",color:"red"})},onFinish:()=>V()})},processing:u,errors:D,prefixParts:b,addTextPart:()=>{y([...b,{id:Date.now(),type:"text",value:""}])},addDynamicPart:()=>{y([...b,{id:Date.now(),type:"dynamic",value:""}])},updatePart:(c,w)=>{y(b.map(A=>A.id===c?{...A,value:w}:A))},removePart:c=>{y(b.filter(w=>w.id!==c))}}}function Wt({numberingSchemeId:e,onDeleteSuccess:t}){const{delete:r,processing:a}=qe();return{handleDeleteNumberingScheme:()=>{if(!e){xe.show({message:"Numbering Scheme ID is missing.",color:"red"});return}r(route("numbering-scheme.destroy",e),{onSuccess:()=>{xe.show({message:"Numbering Scheme deleted successfully.",color:"green"}),t()},onError:o=>{let u="Failed to delete numbering scheme.";o&&Object.keys(o).length>0&&(u=o[Object.keys(o)[0]]),xe.show({message:u,color:"red"})}})},processing:a}}const Gt=({numberingSchemeId:e})=>{const{modals:t,closeModal:r,openModal:a}=Re(),n=t.confirmDeleteNumberingScheme,{handleDeleteNumberingScheme:o,processing:u}=Wt({numberingSchemeId:e,onDeleteSuccess:()=>{r("confirmDeleteNumberingScheme"),r("updateNumberingScheme")}});return d.jsxs($e,{opened:n,onClose:()=>r("confirmDeleteNumberingScheme"),title:d.jsx(fe,{fw:"bold",size:"lg",children:"Confirm Delete"}),size:"sm",children:[d.jsx(fe,{c:"gray.8",children:"Are you sure you want to delete this numbering scheme? This action cannot be undone."}),d.jsxs(We,{align:"center",justify:"flex-end",mt:16,children:[d.jsx(de,{variant:"light",onClick:()=>{r("confirmDeleteNumberingScheme"),a("updateNumberingScheme")},children:"Cancel"}),d.jsx(de,{color:"red",ml:12,onClick:o,loading:u,children:"Delete"})]})]})},or=({itemParent:e})=>{const{modals:t,closeModal:r,openModal:a}=Re(),n=t.updateNumberingScheme,{data:o,setData:u,handleSubmit:D,processing:V,errors:h,prefixParts:b,addTextPart:y,addDynamicPart:m,updatePart:p,removePart:f}=$t({itemParent:e,isOpen:n}),C=[{value:"YY",label:"Year"},{value:"MM",label:"Month"},{value:"DD",label:"Day"},{value:"INC",label:"Increment"}];return d.jsxs(d.Fragment,{children:[d.jsx($e,{opened:n,onClose:()=>r("updateNumberingScheme"),title:d.jsx(fe,{size:"lg",children:"Update Numbering Scheme"}),size:600,children:d.jsxs("form",{onSubmit:D,children:[d.jsxs(ft,{gap:16,children:[d.jsx(Fe,{label:"Name",value:o.name,onChange:v=>u("name",v.target.value),error:h.name,required:!0}),d.jsx(fe,{size:"sm",fw:500,children:"Prefix"}),d.jsxs(Ce,{children:[d.jsx(de,{variant:"subtle",size:"sm",leftSection:d.jsx(Ae,{size:16}),onClick:y,children:"Add Text"}),d.jsx(de,{variant:"subtle",size:"sm",leftSection:d.jsx(Ae,{size:16}),onClick:m,children:"Add Dynamic"})]}),b.map((v,c)=>d.jsxs(Ce,{align:"flex-end",children:[v.type==="text"?d.jsx(Fe,{placeholder:"Enter text",value:v.value,onChange:w=>p(v.id,w.target.value),required:!0,style:{flex:1}}):d.jsx(Pe,{placeholder:"Select dynamic part",data:C,value:v.value,onChange:w=>p(v.id,w||""),required:!0,style:{flex:1}}),d.jsx(Be,{color:"red",onClick:()=>f(v.id),children:d.jsx(Me,{size:16})})]},v.id)),d.jsx(fe,{size:"sm",fw:500,children:"Preview:"}),d.jsx(ct,{withBorder:!0,p:12,bg:"#f9f9f9",children:d.jsx(fe,{children:b.map(v=>{if(v.type==="text")return v.value+" ";switch(v.value){case"YY":return new Date().getFullYear().toString().slice(2)+" ";case"MM":return(new Date().getMonth()+1).toString().padStart(2,"0")+" ";case"DD":return new Date().getDate().toString().padStart(2,"0")+" ";case"INC":return o.next_number.toString().padStart(3,"0")+" ";default:return""}}).join(" ")})}),d.jsxs(Ce,{justify:"space-between",children:[d.jsx(_e,{label:"Next Number",value:o.next_number,onChange:v=>u("next_number",Number(v)),min:1,error:h.next_number,required:!0,style:{flex:1}}),d.jsx(Pe,{label:"Reset Frequency",data:[{value:"none",label:"None"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}],value:o.reset_frequency,onChange:v=>u("reset_frequency",v??"none"),error:h.reset_frequency,required:!0})]})]}),d.jsxs(We,{align:"center",justify:"end",mt:24,children:[d.jsx(de,{variant:"light",onClick:()=>r("updateNumberingScheme"),children:"Cancel"}),d.jsx(de,{ml:12,type:"submit",loading:V,children:"Update"}),d.jsx(Be,{variant:"transparent",color:"red",onClick:()=>{r("updateNumberingScheme"),a("confirmDeleteNumberingScheme")},title:"Delete Numbering Scheme",ml:12,children:d.jsx(Me,{size:18})})]})]})}),d.jsx(Gt,{numberingSchemeId:e==null?void 0:e.numbering_scheme_id})]})};export{_e as N,or as U};
