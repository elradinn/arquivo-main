import{b,W as g,n as h,j as e,M as j,R as F,Y as x}from"./app-Bi-kKfSQ.js";import{u as m,a as S,A as v}from"./Authenticated-C_lZwoKT.js";import{Y as k}from"./index-BALgSnzC.js";import{G as p,d as R}from"./NotificationMenu-C937_Mzw.js";import{T as d,F as f}from"./OfficeLogo-2ZaB1g-B.js";import{B as c}from"./Button-1yfY3Uus.js";import{c as y}from"./IconUser-DGEFyDH_.js";import{S as M}from"./Stack-D9KjGeyZ.js";import"./TextInput-D9HeubEm.js";import"./InputBase-UL63YNSc.js";import"./Popover-DE1Ul7Ry.js";import"./use-uncontrolled-BwiKmmNw.js";import"./get-sorted-breakpoints-Cse3ButY.js";import"./Checkbox-3zVWk8bN.js";import"./CheckIcon-DsGROgfh.js";/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var D=y("outline","restore","IconRestore",[["path",{d:"M3.06 13a9 9 0 1 0 .49 -4.087",key:"svg-0"}],["path",{d:"M3 4.001v5h5",key:"svg-1"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var T=y("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);function C(){const[s,t]=b.useState([]),o=(l=>l.map(n=>n.id))(s);return{selectedRecord:s,setSelectedRecord:t,ids:o}}function I({deleteIds:s}){const{data:t,delete:r,processing:o}=g({ids:[]}),{closeModal:l}=m();return{deleteFilesSubmit:i=>{i.preventDefault(),t.ids=s||[],r(route("trash.delete"),{onSuccess:()=>{l("permanentDelete"),h.show({message:"Files deleted permanently",color:"green"})},onError:a=>{let u="";Object.keys(a).length>0?u=a[Object.keys(a)[0]]:u="Error during file deletion. Please try again later.",h.show({message:u,color:"red"})}})},processing:o}}const z=({deleteIds:s})=>{const{deleteFilesSubmit:t,processing:r}=I({deleteIds:s}),{closeModal:o,modals:l}=m();return e.jsx(j,{opened:l.permanentDelete,onClose:()=>o("permanentDelete"),title:e.jsx(d,{fw:"bold",size:"lg",children:"Delete Forever"}),size:550,children:e.jsxs("form",{onSubmit:t,children:[e.jsx(d,{c:"dimmed",children:"Permanently delete selected files?"}),e.jsxs(f,{align:"center",justify:"end",mt:16,children:[e.jsx(c,{variant:"subtle",onClick:close,color:"gray",children:"Cancel"}),e.jsx(c,{ml:12,type:"submit",loading:r,color:"red",children:"Confirm"})]})]})})};function E(){const{closeModal:s}=m(),{data:t,post:r,processing:o}=g({ids:[]});return{data:t,setData:n=>{Object.assign(t,n)},restoreFilesSubmit:n=>{n.preventDefault(),r(route("trash.restore"),{onSuccess:()=>{s("restoreFiles"),h.show({message:"Files restored successfully",color:"green"})},onError:i=>{let a="";Object.keys(i).length>0?a=i[Object.keys(i)[0]]:a="Error during file restoration. Please try again later.",h.show({message:a,color:"red"})}})},processing:o}}const w=({restoreIds:s})=>{const{data:t,setData:r,restoreFilesSubmit:o,processing:l}=E(),{modals:n,closeModal:i}=m();return F.useEffect(()=>{r({ids:s||[]})},[s,r]),e.jsx(j,{opened:n.restoreFiles,onClose:()=>i("restoreFiles"),title:e.jsx(d,{fw:"bold",size:"lg",children:"Restore Files"}),size:550,children:e.jsxs("form",{onSubmit:o,children:[e.jsx(d,{c:"dimmed",children:"Restore selected files?"}),e.jsxs(f,{align:"center",justify:"end",mt:16,children:[e.jsx(c,{variant:"subtle",onClick:()=>i("restoreFiles"),color:"gray",children:"Cancel"}),e.jsx(c,{ml:12,type:"submit",loading:l,color:"green",children:"Confirm Restore"})]})]})})},O=({selectedIds:s})=>{const{openModal:t}=m();return e.jsxs(p,{h:"50%",px:"md",align:"center",justify:"flex-start",children:[e.jsx(c,{variant:"subtle",color:"dark.3",leftSection:e.jsx(S,{size:18}),onClick:()=>t("permanentDelete"),children:"Delete Forever"}),e.jsx(c,{variant:"subtle",color:"green",leftSection:e.jsx(D,{size:18}),onClick:()=>t("restoreFiles"),children:"Restore"}),e.jsx(z,{deleteIds:s}),e.jsx(w,{restoreIds:s})]})},P=()=>e.jsx(p,{h:"50%",px:"md",align:"center",justify:"flex-start",children:e.jsx(c,{variant:"subtle",color:"dark.3",leftSection:e.jsx(T,{size:18}),children:"Empty Bin"})});function V({trashedItems:s}){const{selectedRecord:t,setSelectedRecord:r,ids:o}=C();return e.jsxs(e.Fragment,{children:[e.jsx(x,{title:"Trash"}),e.jsxs(v,{toolbar:t.length>0?e.jsx(O,{selectedIds:o}):e.jsx(P,{}),children:[e.jsx(x,{title:"My Files"}),e.jsxs(M,{px:8,gap:24,py:8,style:{pointerEvents:"all"},children:[e.jsx(d,{fw:500,children:"Trash"}),s.length===0?e.jsx(d,{size:"lg",c:"gray.5",children:"This trash bin is empty"}):e.jsx(k,{textSelectionDisabled:!0,columns:[{accessor:"name",render:({mime:l,type:n,name:i})=>e.jsxs(p,{align:"center",gap:12,children:[e.jsx(R,{mime:l,isFolder:n==="folder"}),e.jsx("span",{children:i})]})},{accessor:"deleted_at"}],records:s,highlightOnHover:!0,verticalSpacing:"lg",horizontalSpacing:"xl",selectedRecords:t,onSelectedRecordsChange:r})]})]})]})}export{V as default};
