import{b as g,c as D,W as x,n as m,j as s,M as S}from"./app-B-uZTNgo.js";import{u as p,a as y}from"./Authenticated-4qProzow.js";import{T as b,F as N}from"./OfficeLogo-DGK0o9rf.js";import{B as u}from"./Button-Biazr2Gq.js";import{S as C}from"./Stack-CDKCNJxt.js";import{T as f}from"./TextInput-BXGjYln6.js";import{A as w}from"./NotificationMenu-DDpxYau7.js";function v({numberingSchemeId:e,isOpen:c}){const[n,i]=g.useState(null);g.useEffect(()=>{e&&c&&t(e)},[e,c]);const t=async r=>{try{const o=await D.get(`/numbering-scheme/${r}`);i(o.data)}catch(o){console.error("Error fetching numbering scheme",o)}};return n}function F({itemParent:e,isOpen:c}){const n=v({numberingSchemeId:e==null?void 0:e.numbering_scheme_id,isOpen:c}),{data:i,setData:t,put:r,processing:o,errors:h,reset:d}=x({name:"",prefix:""}),{closeModal:l}=p();return g.useEffect(()=>{t({name:(n==null?void 0:n.name)||"",prefix:(n==null?void 0:n.prefix)||""})},[n]),{data:i,setData:t,handleSubmit:j=>{j.preventDefault(),r(route("numbering-scheme.update",e==null?void 0:e.numbering_scheme_id),{onSuccess:()=>{l("updateNumberingScheme"),m.show({message:"Numbering scheme updated successfully",color:"green"})},onError:T=>{m.show({message:"Something went wrong",color:"red"})},onFinish:()=>d()})},processing:o,errors:h}}function M({numberingSchemeId:e,onDeleteSuccess:c}){const{delete:n,processing:i}=x();return{handleDeleteNumberingScheme:()=>{if(!e){m.show({message:"Numbering Scheme ID is missing.",color:"red"});return}n(route("numbering-scheme.destroy",e),{onSuccess:()=>{m.show({message:"Numbering Scheme deleted successfully.",color:"green"}),c()},onError:r=>{let o="Failed to delete numbering scheme.";r&&Object.keys(r).length>0&&(o=r[Object.keys(r)[0]]),m.show({message:o,color:"red"})}})},processing:i}}const k=({numberingSchemeId:e})=>{const{modals:c,closeModal:n,openModal:i}=p(),t=c.confirmDeleteNumberingScheme,{handleDeleteNumberingScheme:r,processing:o}=M({numberingSchemeId:e,onDeleteSuccess:()=>{n("confirmDeleteNumberingScheme"),n("updateNumberingScheme")}});return s.jsxs(S,{opened:t,onClose:()=>n("confirmDeleteNumberingScheme"),title:s.jsx(b,{fw:"bold",size:"lg",children:"Confirm Delete"}),size:"sm",children:[s.jsx(b,{c:"gray.8",children:"Are you sure you want to delete this numbering scheme? This action cannot be undone."}),s.jsxs(N,{align:"center",justify:"flex-end",mt:16,children:[s.jsx(u,{variant:"light",onClick:()=>{n("confirmDeleteNumberingScheme"),i("updateNumberingScheme")},children:"Cancel"}),s.jsx(u,{color:"red",ml:12,onClick:r,loading:o,children:"Delete"})]})]})},R=({itemParent:e})=>{const{modals:c,closeModal:n,openModal:i}=p(),t=c.updateNumberingScheme,{data:r,setData:o,handleSubmit:h,processing:d,errors:l}=F({itemParent:e,isOpen:t});return s.jsxs(s.Fragment,{children:[s.jsx(S,{opened:t,onClose:()=>n("updateNumberingScheme"),title:s.jsx(b,{size:"lg",children:"Update Numbering Scheme"}),size:550,children:s.jsxs("form",{onSubmit:h,children:[s.jsxs(C,{gap:16,children:[s.jsx(f,{label:"Name",value:r.name,onChange:a=>o("name",a.target.value),error:l.name}),s.jsx(f,{label:"Prefix",value:r.prefix,onChange:a=>o("prefix",a.target.value),error:l.prefix})]}),s.jsxs(N,{align:"center",justify:"end",mt:16,children:[s.jsx(u,{variant:"light",onClick:()=>n("updateNumberingScheme"),children:"Cancel"}),s.jsx(u,{ml:12,type:"submit",loading:d,children:"Update"}),s.jsx(w,{variant:"transparent",color:"red",onClick:()=>{n("updateNumberingScheme"),i("confirmDeleteNumberingScheme")},title:"Delete Numbering Scheme",ml:12,children:s.jsx(y,{size:18})})]})]})}),s.jsx(k,{numberingSchemeId:e==null?void 0:e.numbering_scheme_id})]})};export{R as U};
